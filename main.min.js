(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/CircleSvg.js":[function(require,module,exports){
/**
 * Created by sanchez on 16/1/5.
 */
'use strict';
var CircleSvg = function () {

};

CircleSvg.prototype = {
    //svg初始化
    initCircle: function () {
        this.isStop=false;
        var lastTime = 0;
        var vendors = ['webkit', 'moz'];
        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||    // Webkit中此取消方法的名字变了
                window[vendors[x] + 'CancelRequestAnimationFrame'];
        }
        var _this = this;
        if (!window.requestAnimationFrame) {
            window.requestAnimationFrame = function (callback, element) {
                var currTime = new Date().getTime();
                var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));
                var id = window.setTimeout(function () {
                    callback(currTime + timeToCall);
                }, timeToCall);
                lastTime = currTime + timeToCall;
                return id;
            };
        }
        if (!window.cancelAnimationFrame) {
            window.cancelAnimationFrame = function (id) {
                clearTimeout(id);
            };
        }


        this.svgWidth = document.getElementById("drawing").offsetWidth / 2;
        this.svgHeight = document.getElementById("drawing").offsetHeight / 2 + 100;
        this.maxRadius = Math.sqrt(this.svgHeight * this.svgHeight + this.svgWidth * this.svgWidth);


        // create svg drawing
        this.draw = SVG('drawing').size('100%', '100%');

    },
    //svg圆播放
    playCircle:function(){
        this.isStop=false;
        var _this=this;
        this.circleAry = [];
        if(!this.isStop){
            this.circleAry[0] = this.createCircle();
        }


        function checkCircle(){
            if (!_this.isStop)
                requestAnimationFrame(checkCircle);

            if (_this.circleAry.length > 0) {
                var lastCircle = _this.circleAry[_this.circleAry.length - 1];

                if (lastCircle.width() > 130) {
                    _this.circleAry[_this.circleAry.length] = _this.createCircle();
                }

                if (_this.circleAry[0].width() > _this.maxRadius * 1.7) {
                    _this.circleAry[0].remove();
                    _this.circleAry.shift();

                }
            }
        }
        checkCircle();
    },
    //svg圆暂停
    pauseCircle:function(){
        this.isStop=true;
        for(var i in this.circleAry){
            this.circleAry[i].pause();

        }
        //this.circleAry = [];
        //this.playCircle();

    },

    //svg暂停后继续
    resumeCircle:function(){
        this.isStop=false;
        var _this=this;
        for(var i in this.circleAry) {
            this.circleAry[i].play();
        }
        function Sd() {
            if (!_this.isStop)
                requestAnimationFrame(Sd);
            if (_this.circleAry.length > 0) {
                var wwww = _this.circleAry[_this.circleAry.length - 1];

                if (wwww.width() > 130) {
                    _this.circleAry[_this.circleAry.length] = _this.createCircle();
                }

                if (_this.circleAry[0].width() > _this.maxRadius * 1.7) {
                    _this.circleAry[0].remove();
                    _this.circleAry.shift();

                }
            }
        }Sd()
    },
    //创建svg圆
    createCircle: function () {
        var circle = this.draw.circle(1);
        circle.attr({
            fill: 'none', stroke: '#4d4d4d', 'stroke-width': 1, 'stroke-dasharray': '5,5'
        });

        circle.center(this.svgWidth, this.svgHeight);

//        circle.attr('width', 1).animate().attr('size', 1000);
        //每隔10秒放一个圈
            circle.animate(10000, '=').size(this.maxRadius * 2, this.maxRadius * 2);
        return circle;
    }


}
module.exports = CircleSvg;
},{}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/InfoMask.js":[function(require,module,exports){
/**
 * Created by sanchez on 16/1/4.
 */
'use strict';


var InfoMask = function (game, _x, _y, tNumber) {
    this.game = game;
    this._x = _x;
    this._y = _y;
    this._tNumber = tNumber;
    this.i = 0;
    this.j = 0;
    this.f1=true;
    this.f2=true;

    //title 377 120
    //txt 307 90

    Phaser.Sprite.call(this, this.game, this._x, this._y);
    this.title_bg = this.game.make.sprite(0, 0, 'title_bg');
    this.mtitle = this.game.make.sprite(-377 / 2, 0, 'scan_title', tNumber);

    //this.sjs_mp3 = this.game.add.audio('sjs_mp3');
    //this.tyy_mp3 = this.game.add.audio('tyy_mp3');
    //var wm_mp3 = this.game.add.audio('wm_mp3', tNumber);
    //this.yb_mp3 = this.game.add.audio('yb_mp3');
    //this.bz_mp3 = this.game.add.audio('bz_mp3');
    ////	Create a new bitmap data the same size as our picture
    //this.bmd = this.game.make.bitmapData(377, 120);
    ////	And create an alpha mask image by combining pic and mask from the cache
    //this.bmd.alphaMask(this.title_bg, this.mtitle);
    ////var title_bg=this.game.add.sprite(0,0,'title_bg');
    //this.scan_title = this.game.make.sprite(-377 / 2, 0, this.bmd);

    var scan_txt = this.game.make.sprite(-307 / 2, 190, 'scan_txt', tNumber);
    //this.addChild(wm_mp3);
    this.addChild(scan_txt);

    this.addChild(this.mtitle);


    game.add.existing(this);
    return this;
};
InfoMask.prototype = Object.create(Phaser.Sprite.prototype);

InfoMask.prototype.constructor = InfoMask;
InfoMask.prototype.fadeOut=function(c){
    var _this=this;
    var f=this.game.add.tween(this).to({alpha:0},1000,null,true,1000);
    f.onComplete.add(function(){
        _this.nextT();
        c();

    },this)
};
InfoMask.prototype.endOut=function(){
    var _this=this;
    var f=this.game.add.tween(this).to({alpha:0},1000,null,true,1000);
    f.onComplete.add(function(){
        _this.removeChild();
    },this)
};
//雾霾isi....
InfoMask.prototype.nextT=function(){
    this.removeChildren();
    this.alpha=1;
    this._tNumber++;
    //this.title_bg = this.game.make.sprite(-253*Math.random(), -799*Math.random(), 'title_bg');
    this.mtitle = this.game.make.sprite(-377 / 2, 0, 'scan_title', this._tNumber);
    //	Create a new bitmap data the same size as our picture
    //this.bmd = this.game.make.bitmapData(377, 120);
    //	And create an alpha mask image by combining pic and mask from the cache
    //this.bmd.alphaMask(this.title_bg, this.mtitle);
    //var title_bg=this.game.add.sprite(0,0,'title_bg');
    //this.scan_title = this.game.make.sprite(-377 / 2, 0, this.bmd);
    var scan_txt = this.game.make.sprite(-307 / 2, 190, 'scan_txt', this._tNumber);




    this.addChild(scan_txt);
    this.addChild(this.mtitle);

    //game.add.existing(this);


};

InfoMask.prototype.update = function () {
    //this.removeChildAt(1);
    //if(this.i>=253)this.f1=false;
    //
    //if(this.j>=799)this.f2=false;
    //if(this.i<=0)this.f1=true;
    //if(this.j<=0)this.f2=true;
    //console.log("i:" +this.i+"   j:"+this.j);
    //this.title_bg = this.game.make.sprite(-this.i , -this.j, 'title_bg');
    //this.mtitle = this.game.make.sprite(0, 0, 'scan_title',this._tNumber);
    ////	Create a new bitmap data the same size as our picture
    //this.bmd = this.game.make.bitmapData(377, 120);
    ////	And create an alpha mask image by combining pic and mask from the cache
    //this.bmd.alphaMask(this.title_bg,  this.mtitle);
    ////var title_bg=this.game.add.sprite(0,0,'title_bg');
    //this.scan_title = this.game.make.sprite(-377 / 2, 0, this.bmd);
    ////console.log(this.title_bg.x);
    //this.addChild(this.scan_title);
    //this.f1==true?this.i+=0.5:this.i-=0.5;
    //this.f2==true?this.j+=0.5:this.j-=0.5;

};

module.exports = InfoMask;
},{}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js":[function(require,module,exports){
/**
 * Created by daimons on 15/12/18.
 */

'use strict';


/*
视频序列帧播放类
 @startIndex 开始图片文件序列
 @endIndex 结束图片文件序列
 @x y width height 视频的位置及宽高
 @frameWidth,frameHeight  序列帧纹理宽高
 @totalFrames 视频序列帧总帧数
 @frameRate  帧速率 每秒帧数
 @onComplete 播放结束回调
 */


//prefix,startIndex,endIndex,,frameWidth,frameHeight,totalFrames,frameRate

var  MovieClip = function(game,_x,_y,_width,_height,videoConfig,onComplete) {
  this.game = game;
  this.videoConfig = videoConfig;
  this.curentIndex = !!this.videoConfig?this.videoConfig.getStartIndex():0;
  this._x = _x;
  this._y = _y;
  this._width = _width;
  this._height = _height;
  this._pause = false;

  this._scale = this._width/this.videoConfig.frameWidth;
  this.onComplete = onComplete;
  Phaser.Sprite.call(this, this.game,this._x,this._y);
  this.anchor.set(0);
  this.sprite = null;
  game.add.existing(this);
  return this;
};

MovieClip.prototype = Object.create(Phaser.Sprite.prototype);

MovieClip.prototype.constructor = MovieClip;

MovieClip.prototype.playVideo = function(){
  if(this.sprite==null) {
    this.sprite = this.game.make.sprite(0, 0, this.videoConfig.prefix + this.curentIndex);
    this.addChild(this.sprite);
  }
  this.anim = this.sprite.animations.add('anim'+this.curentIndex);
  this.anim.onComplete.add(this.onAnimationFinish, this);
  this.sprite.anchor.set(0);
  this.sprite.scale.set(this._scale);  //以视频的宽为准
  this.sprite.animations.play('anim'+this.curentIndex, this.videoConfig.frameRate, false);
};

MovieClip.prototype.onAnimationFinish = function(pSender){
  console.log("onAnimationFinish");

  this.curentIndex++;
  if (this.curentIndex>this.videoConfig.end)
  {
    if(!!this.onComplete || typeof(this.onComplete)=='function')
    {
      this.onComplete();
    }
    return;
  }
  this.sprite.loadTexture(this.videoConfig.prefix+this.curentIndex, 0);
  this.anim = this.sprite.animations.add('anim'+this.curentIndex);
  this.anim.onComplete.add(this.onAnimationFinish, this);
  this.sprite.animations.play('anim'+this.curentIndex, this.videoConfig.frameRate, false);
};


//是否暂停
MovieClip.prototype.isPause = function () {
  return this._pause;
};


//暂停
MovieClip.prototype.pause = function () {
  if(!!this.sprite) {
    this.sprite.animations.stop('anim' + this.curentIndex, false);
    this._pause = true;
  }
};

//继续播放
MovieClip.prototype.resume = function () {
  if(!!this.sprite) {
    this.sprite.animations.play('anim' + this.curentIndex, this.videoConfig.frameRate, false);
    console.log("resume");
    this._pause = false;
  }
};

module.exports = MovieClip;


},{}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/main.js":[function(require,module,exports){
'use strict';

//var VideoConfig = require('./entities/VideoConfig');
var game = new Phaser.Game(750,1206, Phaser.CANVAS, 'game',null,true);


//window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
};


/*
视频序列帧的所有配置写在这里
 */


//window.introlConfig = new VideoConfig(game,"assets/video/","video_",".jpg",0,69,320,569,9,627,15);



game.state.add('Boot', require('./states/boot'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Game', require('./states/game'));
game.state.add('game1', require('./states/game1'));
game.state.add('page_1', require('./states/page_1'));
game.state.add('page_2', require('./states/page_2'));
game.state.add('page_3', require('./states/page_3'));
game.state.add('page_4', require('./states/page_4'));
game.state.add('page_5', require('./states/page_5'));
game.state.add('page_6', require('./states/page_6'));
game.state.add('page_7', require('./states/page_7'));
game.state.add('test', require('./states/test'));
game.state.start('Boot');



},{"./states/boot":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/boot.js","./states/game":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/game.js","./states/game1":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/game1.js","./states/page_1":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_1.js","./states/page_2":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_2.js","./states/page_3":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_3.js","./states/page_4":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_4.js","./states/page_5":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_5.js","./states/page_6":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_6.js","./states/page_7":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_7.js","./states/preloader":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/preloader.js","./states/test":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/test.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/boot.js":[function(require,module,exports){

var Boot = function () {};

module.exports = Boot;
Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
    this.stage.backgroundColor = '#000000';
  },

  create: function () {
    if (this.game.device.desktop) {
      //this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
    }
    else {
      this.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;
      this.scale.setUserScale(window.innerWidth/750,window.innerWidth/750,0,0);
      //this.scale.setMinMax(480, 260, 1024, 768);
      this.scale.pageAlignHorizontally = true;
      this.scale.pageAlignVertically = true;

    }

    //this.game.input.maxPointers = 1;
    //
    //if (this.game.device.desktop) {
    //  this.game.stage.scale.pageAlignHorizontally = true;
    //} else {
    //  this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
    //  this.game.scale.minWidth =  480;
    //  this.game.scale.minHeight = 260;
    //  this.game.scale.maxWidth = 640;
    //  this.game.scale.maxHeight = 480;
    //  this.game.scale.forceLandscape = true;
    //  this.game.scale.pageAlignHorizontally = true;
    //  this.game.scale.setScreenSize(true);
    //}

    this.game.state.start('Preloader');
  }
};

},{}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/game.js":[function(require,module,exports){
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var Game = function () {
  this.movieClip = null;
};

module.exports = Game;
Game.prototype = {

  create: function () {
      var bg1=this.game.add.sprite(0,0,'bg1');
      bg1.scale.setTo(2);
      var hand=this.game.add.sprite(this.game.width/2,this.game.height/2,'hand');
      hand.scale.setTo(1);

      var group1=this.game.add.group();
      var circle_1=group1.create(this.game.width/2-10,this.game.height/2-30,'circle_1');
      circle_1.scale.setTo(1);
      var circle_2=group1.create(this.game.width/2-20,this.game.height/2-30,'circle_2');
      circle_2.scale.setTo(1);


      var tween_=this.game.add.tween(group1).to({alpha:0.5,x:+10},500,'Linear',true,0,-1,true);

      this.input.onDown.add(this.onDown, this);
},
  onDown:function(){
        //console.      ');

        var hand=this.game.add.sprite(this.game.width/2,this.game.height/2,'hand');

        var tween_=this.game.add.tween(hand).to({alpha:0},1,'Linear',true).onComplete.add(function(){

            this.game.state.start('game1');

        },this);
    } ,

  update: function () {
    //var x, y, cx, cy, dx, dy, angle, scale;
    //
    //x = this.input.position.x;
    //y = this.input.position.y;
    //cx = this.world.centerX;
    //cy = this.world.centerY;
    //
    //angle = Math.atan2(y - cy, x - cx) * (180 / Math.PI);
    //this.testentity.angle = angle;
    //
    //dx = x - cx;
    //dy = y - cy;
    //scale = Math.sqrt(dx * dx + dy * dy) / 100;
    //
    //this.testentity.scale.x = scale * 0.6;
    //this.testentity.scale.y = scale * 0.6;
  }
};





},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/game1.js":[function(require,module,exports){
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var game1 = function () {
    this.movieClip = null;
};
module.exports = game1;

game1.prototype = {
    create: function () {

        console.log('page game_1');
        var bg1=this.game.add.sprite(0,0,'bg1');
        bg1.scale.setTo(2);

        var group2=this.game.add.group();



        var dian1=group2.create(this.game.width/2-302,this.game.height/2-30,'dian1');
        dian1.scale.setTo(1);
        var dian1_dh=this.game.add.tween(dian1).to({x:350},1500,'Linear',true,500);

        var dianmask=this.game.add.sprite(this.game.width/2-318,this.game.height/2-30,'dianmask');
        dianmask.scale.setTo(1);

        var txt1=group2.create(this.game.width,this.game.height/2+20,'txt1');
        txt1.scale.setTo(1);
        var txt1_dh=this.game.add.tween(txt1).to({x:380},500,'Linear',true);

        var txt2=group2.create(this.game.width/2-350,this.game.height/2+20,'txt2');
        txt2.scale.setTo(1);
        var txt2_dh=this.game.add.tween(txt2).to({x:332},500,'Linear',true);
        txt2_dh.chain(dian1_dh);

        dian1_dh.onComplete.add(function(){
            var s=this.game.add.tween(group2).to({alpha:0},1000,'Linear',true).onComplete.add(function(){
                this.game.state.start('page_1');

            },this);
        },this);
    } ,

    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_1.js":[function(require,module,exports){
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_1 = function () {
    this.movieClip = null;
};
module.exports = page_1;

page_1.prototype = {
    create: function () {
        console.log('page shan');
        var bg11=this.game.add.sprite(0,0,'bg1');
        bg11.scale.setTo(2);

        var group3=this.game.add.group();
        var bg1=group3.create(0,0,'background_1');
        bg1.scale.setTo(1);
        var bg1_dh=this.game.add.tween(bg1).to({x:-200},6000,'Linear',true);


        var shan_text1=group3.create(this.game.width/2-100,this.game.height/2+52,'shan_text1');
        shan_text1.scale.setTo(1);
        shan_text1.alpha=0;

        var shan_text1_dh=this.game.add.tween(shan_text1).to({alpha:1,x:330},1000,'Linear',true);

        var shan_text2=group3.create(this.game.width/2-45,this.game.height/2+276,'shan_text2');
        shan_text2.scale.setTo(1);
        shan_text2.alpha=0;
        var shan_text2_dh=this.game.add.tween(shan_text2).to({alpha:1},1000,'Linear',true,1000);

        var shan_text3=group3.create(this.game.width/2+45,this.game.height/2+52,'shan_text3');
        shan_text3.scale.setTo(1);
        shan_text3.alpha=0;
        var shan_text3_dh=this.game.add.tween(shan_text3).to({alpha:1,x:395},1000,'Linear',true,1500);

        var kuang=group3.create(this.game.width/2-55,this.game.height/2+273,'kuang');
        kuang.scale.setTo(1);
        kuang.alpha=0;
        var kuang_dh=this.game.add.tween(kuang).to({alpha:1},1000,'Linear',true,1000);

        var music = this.game.add.audio('shan_mp3');
        music.play();


        var sh1=group3.create(0,0,'shan_xlz0');
        sh1.scale.setTo(2);
        sh1.animations.add('shan_xlz0');
        sh1.killOnComplete=false;
        sh1.animations.play('shan_xlz0',15,false).onComplete.add(function(){

            var sh2=group3.create(0,0,'shan_xlz1');
            sh2.scale.setTo(2);
            sh2.animations.add('shan_xlz1');
            sh2.killOnComplete=false;
            var _this = this;
            sh2.animations.play('shan_xlz1',15,false).onComplete.add(function(){

                var sh3=group3.create(0,0,'shan_xlz2');
                sh3.scale.setTo(2);
                sh3.animations.add('shan_xlz2');
                sh3.killOnComplete=false;
                var __this = _this;
                sh3.animations.play('shan_xlz2',15,false).onComplete.add(function(){

                    var sh4=group3.create(0,0,'shan_xlz3');
                    sh4.scale.setTo(2);
                    sh4.animations.add('shan_xlz3');
                    sh4.killOnComplete=false;
                    var ___this = __this;
                    sh4.animations.play('shan_xlz3',15,false).onComplete.add(function(){

                        var sh5=group3.create(0,0,'shan_xlz4');
                        sh5.scale.setTo(2);
                        sh5.animations.add('shan_xlz4');
                        sh5.killOnComplete=false;
                        var ____this = ___this;
                        sh5.animations.play('shan_xlz4',15,false).onComplete.add(function(){

                            var sh6=group3.create(0,0,'shan_xlz5');
                            sh6.scale.setTo(2);
                            sh6.animations.add('shan_xlz5');
                            sh6.animations.play('shan_xlz5',15,false);
                        });
                    });
                });
            });
        },this);

        bg1_dh.onComplete.add(function(){
            var bg1_dh=this.game.add.tween(bg1).from({},1,'Linear',true);
            var s=this.game.add.tween(group3).to({alpha:0},1000,'Linear',true).onComplete.add(function(){
                this.game.state.start('page_2');

            },this);
        },this);
    } ,

    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_2.js":[function(require,module,exports){
/**
 * Created by xiaoqing on 2015/12/23.
 */
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_2 = function () {
    this.movieClip = null;
};
module.exports = page_2;
page_2.prototype = {

    create: function () {
        console.log('page hai');
        var bg1=this.game.add.sprite(0,0,'bg1');
        bg1.scale.setTo(1);


        var group4=this.game.add.group();
        var t1=group4.create(0,0,'bg_2');
        t1.scale.setTo(1);
        t1.animations.add('bg_2');



        var hai_text1=group4.create(this.game.width/2,this.game.height-241,'hai_text1');
        hai_text1.scale.setTo(1);

        var hai_text1_dh=this.game.add.tween(hai_text1).to({y:724},500,'Linear',true);

        var hai_text2=group4.create(this.game.width/2-10,this.game.height-195,'hai_text2');
        hai_text2.scale.setTo(1);
        var hai_text2_dh=this.game.add.tween(hai_text2).to({y:820},700,'Linear',true);

        var hai_text3=group4.create(this.game.width/2,this.game.height-131,'hai_text3');
        hai_text3.scale.setTo(1);
        var hai_text3_dh=this.game.add.tween(hai_text3).to({y:944},1000,'Linear',true);

        var music1 = this.game.add.audio('hai_mp3');
        music1.play();

        var h1=group4.create(0,254,'hai_xlz1');
        h1.scale.setTo(2);
        h1.animations.add('hai_xlz1');
        h1.killOnComplete=false;
        t1.animations.play('bg_2',1,true);
        h1.animations.play('hai_xlz1',15,false).onComplete.add(function(){
            var h2=group4.create(0,254,'hai_xlz2');

            h2.scale.setTo(2);
            h2.animations.add('hai_xlz2');
            h2.animations.play('hai_xlz2',15,true);
        },this);

        hai_text1_dh.onComplete.add(function(){
            var hai_text1_dh=this.game.add.tween(hai_text1).from({},10,'Linear',true);
            var s2=this.game.add.tween(group4).to({alpha:0},1000,'Linear',true,4000).onComplete.add(function(){
                   this.game.state.start('page_3');
            },this);
        },this);
    } ,

    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_3.js":[function(require,module,exports){
/**
 * Created by xiaoqing on 2015/12/23.
 */
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_3 = function () {
    this.movieClip = null;
};
module.exports = page_3;

page_3.prototype = {
    create: function () {
        console.log('page shandian');
        var bg1=this.game.add.sprite(0,0,'bg1');
        bg1.scale.setTo(2);

        var group5=this.game.add.group();

        var t1=group5.create(0,0,'bg_3');
        t1.scale.setTo(1);
        t1.animations.add('bg_3');



        var shandian_text1=group5.create(this.game.width/2-10,this.game.height/2+50,'shandian_text1');
        shandian_text1.scale.setTo(1);
        shandian_text1.alpha=0;
        var shandian_text1_dh=this.game.add.tween(shandian_text1).to({alpha:1},1000,'Linear',true,500);


        var shandian_text2=group5.create(this.game.width/2,this.game.height/2+750,'shandian_text2');
        shandian_text2.scale.setTo(1);
        shandian_text2.alpha=0;
        var shandian_text2_dh=this.game.add.tween(shandian_text2).to({alpha:1,y:800},1000,'Linear',true,1000);


        var music2 = this.game.add.audio('shandian_mp3');
        music2.play();

        var s0=group5.create(0,0,'sd_xlz0');
        s0.scale.setTo(2);
        s0.animations.add('sd_xlz0');
        s0.killOnComplete=true;
        s0.animations.play('sd_xlz0',15,false).onComplete.add(function(){
            var s1=group5.create(0,0,'sd_xlz1');
            s1.scale.setTo(2);
            s1.animations.add('sd_xlz1');
            s1.killOnComplete=true;

            s1.animations.play('sd_xlz1',15,false).onComplete.add(function() {
                var s2 =group5.create(0, 0, 'sd_xlz2');
                s2.scale.setTo(2);
                s2.animations.add('sd_xlz2');
                s2.killOnComplete = true;
                t1.animations.play('bg_3',2,true);
                s2.animations.play('sd_xlz2', 15, false).onComplete.add(function () {
                    var s3 =group5.create(0, 0, 'sd_xlz3');
                    s3.scale.setTo(2);
                    s3.animations.add('sd_xlz3');
                    s3.killOnComplete = true;

                    s3.animations.play('sd_xlz3', 15, false).onComplete.add(function () {
                        var s4 = group5.create(0, 0, 'sd_xlz4');
                        s4.scale.setTo(2);
                        s4.animations.add('sd_xlz4');
                        s4.killOnComplete = true;

                        s4.animations.play('sd_xlz4', 15, false).onComplete.add(function () {
                            var s5 = group5.create(0, 0, 'sd_xlz5');
                            s5.scale.setTo(2);
                            s5.animations.add('sd_xlz5');
                                s5.animations.play('sd_xlz5', 15, true);
                        });
                    });
                });
            });
        },this);

        shandian_text1_dh.onComplete.add(function(){
            var shandian_text1_dh=this.game.add.tween(shandian_text1).from({},1,'Linear',true);
            var s5=this.game.add.tween(group5).to({alpha:0},1000,'Linear',true,5000).onComplete.add(function(){
                    this.game.state.start('page_4') ;


            },this);

        },this);
    } ,

    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_4.js":[function(require,module,exports){
/**
 * Created by xiaoqing on 2015/12/23.
 */
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_4 = function () {
    this.movieClip = null;
};
module.exports = page_4;

page_4.prototype = {

    create: function () {
        console.log('page wenzi');
        var bg1=this.game.add.sprite(0,0,'bg1');
        bg1.scale.setTo(2);

        var group6=this.game.add.group();
        var bg4=group6.create(0,0,'background4');
        bg4.scale.setTo(1);
        var bg4_dh=this.game.add.tween(bg4).to({x:-200},6000,'Linear',true);

        var xin_text1=group6.create(this.game.width/2-750,this.game.height/2,'xin_text1');
        xin_text1.scale.setTo(1);
        xin_text1.alpha=0;
        var xin_text1_dh=this.game.add.tween(xin_text1).to({alpha:1,x:309},1000,'Linear',true);

        var xin_text2=group6.create(this.game.width/2+750,this.game.height/2,'xin_text2');
        xin_text2.scale.setTo(1);
        xin_text2.alpha=0;
        var xin_text2_dh=this.game.add.tween(xin_text2).to({alpha:1,x:386},1000,'Linear',true,1500);


        var xin_text3=group6.create(this.game.width/2-80,this.game.height/2+170,'xin_text3');
        xin_text3.scale.setTo(1);
        xin_text3.alpha=0;
        var xin_text3_dh=this.game.add.tween(xin_text3).to({alpha:1},1000,'Linear',true,1000);

        var music3 = this.game.add.audio('xin_mp3');
        music3.play();

        var x1=group6.create(0,256,'xin_xlz1');
        x1.scale.setTo(2);
        x1.animations.add('xin_xlz1');
        x1.killOnComplete=false;
        x1.animations.play('xin_xlz1',15,false).onComplete.add(function(){
            var x2=group6.create(0,256,'xin_xlz2');

            x2.scale.setTo(2);
            x2.animations.add('xin_xlz2');
            x2.animations.play('xin_xlz2',15,true);

        },this);
        bg4_dh.onComplete.add(function(){
            var bg4_dh=this.game.add.tween(bg4).from({},10,'Linear',true);
            var s5=this.game.add.tween(group6).to({alpha:0},1000,'Linear',true).onComplete.add(function(){

                this.game.state.start('test') ;
            },this);

        },this);
    } ,

    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_5.js":[function(require,module,exports){
/**
 * Created by xiaoqing on 2015/12/23.
 */
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_5 = function () {
    this.movieClip = null;
};
module.exports = page_5;

page_5.prototype = {

    create: function () {
        console.log('page dierbufen');
        var bg1=this.game.add.sprite(0,0,'bg1');
        bg1.scale.setTo(2);

        var two_bg=this.game.add.sprite(0,0,'two_bg');
        two_bg.scale.setTo(1);

        var two_shou=this.game.add.sprite(this.game.width/2,this.game.height/2+80,'two_shou');
        two_shou.scale.setTo(1);
        var two_shou_dh=this.game.add.tween(two_shou).from({blendMode:50},1000,'Linear',true);

        var two_yuan=this.game.add.sprite(this.game.width/2-35,this.game.height/2+45,'two_yuan');
        two_yuan.scale.setTo(1);
        var two_yuan_dh=this.game.add.tween(two_yuan).to({worldRotation:23},1000,'Linear',true);

        var two_text=this.game.add.sprite(this.game.width/2-40,this.game.height/2+500,'two_text');
        two_text.scale.setTo(1);


        this.input.onDown.add(this.xia, this);
        this.input.onDown.add(this.xia, this);
    },
    xia:function(){
        //console.      ');

        var hand=this.game.add.sprite(this.game.width/2,this.game.height/2,'hand');

        var tween_=this.game.add.tween(hand).to({alpha:0},1,'Linear',true).onComplete.add(function(){

            this.game.state.start('test');

        },this);
    } ,


    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    }
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_6.js":[function(require,module,exports){
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_6 = function () {
    this.movieClip = null;
};
module.exports = page_6;

page_6.prototype = {
    create: function () {
        console.log('page guoduye');

        var group66=this.game.add.group();
        var gdy_text1=group66.create(this.game.width/2-31,this.game.height/2+100,'gdy_text1');
        gdy_text1.scale.setTo(1);
        var gdy_text1_dh=this.game.add.tween(gdy_text1).to({y:311},1000,'Linear',true);

        var gdy_text2=group66.create(this.game.width/2-164,this.game.height/2+100,'gdy_text2');
        gdy_text2.scale.setTo(1);
        var gdy_text2_dh=this.game.add.tween(gdy_text2).to({y:374},1300,'Linear',true);

        var gdy_text3=group66.create(this.game.width/2-31,this.game.height/2+100,'gdy_text3');
        gdy_text3.scale.setTo(1);
        var gdy_text3_dh=this.game.add.tween(gdy_text3).to({y:445},1500,'Linear',true);

        var gdy_text4=group66.create(this.game.width/2-179,this.game.height/2+100,'gdy_text4');
        gdy_text4.scale.setTo(1);
        var gdy_text4_dh=this.game.add.tween(gdy_text4).to({y:507},1800,'Linear',true);

        var gdy_text5=group66.create(this.game.width/2-164,this.game.height/2+100,'gdy_text5');
        gdy_text5.scale.setTo(1);
        var gdy_text5_dh=this.game.add.tween(gdy_text5).to({y:571},2100,'Linear',true);






        gdy_text5_dh.onComplete.add(function(){
            var gdy_text5_dh=this.game.add.tween(gdy_text5).to({y:571},4000,'Linear',true);
            var s66=this.game.add.tween(group66).to({alpha:0},1000,'Linear',true).onComplete.add(function(){
                this.game.state.start('page_7') ;
            },this);

        },this);
    } ,
    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/page_7.js":[function(require,module,exports){
//var Player = require('../entities/player');
var MovieClip = require('../entities/MovieClip');
var page_7 = function () {
    this.movieClip = null;
};
module.exports = page_7;

page_7.prototype = {
    create: function () {
        console.log('page video');

        var group77=this.game.add.group();
        var zly_bg=group77.create(0,0,'zly_bg');
        zly_bg.scale.setTo(1);

        var logo=group77.create(this.game.width/2-146,this.game.height/2-750,'logo');
        logo.scale.setTo(1);
        var logo_dh=this.game.add.tween(logo).to({y:35},1300,'Linear',true);

        var video1=group77.create(this.game.width/2-375,this.game.height/2-497,'video1');
        video1.scale.setTo(1);
        var video1_dh=this.game.add.tween(video1).to({x:174},1300,'Linear',true);

        var video1text=group77.create(this.game.width/2-375,this.game.height/2-220,'video1text');
        video1text.scale.setTo(1);
        var video1text_dh=this.game.add.tween(video1text).to({x:248},1300,'Linear',true);

        var video2=group77.create(this.game.width,this.game.height/2-139,'video2');
        video2.scale.setTo(1);
        var video2_dh=this.game.add.tween(video2).to({x:174},1300,'Linear',true);

        var video2text=group77.create(this.game.width,this.game.height/2+141,'video2text');
        video2text.scale.setTo(1);
        var video2text_dh=this.game.add.tween(video2text).to({x:248},1300,'Linear',true);

        var video3=group77.create(this.game.width/2-375,this.game.height/2+234,'video3');
        video3.scale.setTo(1);
        var video3_dh=this.game.add.tween(video3).to({x:174},1300,'Linear',true);

        var video3text=group77.create(this.game.width/2-375,this.game.height/2+507,'video3text');
        video3text.scale.setTo(1);
        var video3text_dh=this.game.add.tween(video3text).to({x:248},1300,'Linear',true);

        video1.inputEnabled = true;
        video1.events.onInputDown.add(function(){
            window.location.href="http://v.qq.com/iframe/player.html?vid=p01797j1i02&tiny=0","p01797j1i02";
        }, this);
        video2.inputEnabled = true;
        video2.events.onInputDown.add(function(){
            window.location.href="http://v.qq.com/iframe/player.html?vid=d0179wn94tu&tiny=0","d0179wn94tu";
        }, this);
        video3.inputEnabled = true;
        video3.events.onInputDown.add(function(){
            window.location.href="http://v.qq.com/iframe/player.html?vid=i0179ziebgm&tiny=0","i0179ziebgm";
        }, this);

    } ,

    update: function () {

    },

    clickListener: function() {
        if(!!this.movieClip)
        {
            if(this.movieClip.isPause())
            {
                this.movieClip.resume();
            }
            else
            {
                this.movieClip.pause();
            }
        }
    },
};
},{"../entities/MovieClip":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/MovieClip.js"}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(this.width/2, this.height/2, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);
    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);
    if(!!window.introlConfig)
        window.introlConfig.preload();//加载序列帧

    //启动
    this.game.load.image('hand','assets/bg/hand.png');
    this.game.load.image('circle_1','assets/bg/circle_1.png');
    this.game.load.image('circle_2','assets/bg/circle_2.png');

    //开始
    this.game.load.image('txt1','assets/bg/2-1.png');
    this.game.load.image('txt2','assets/bg/2-2.png');
    this.game.load.image('dian1','assets/bg/game_dian1.png');
    this.game.load.image('dianmask','assets/bg/dianmask.png');
    this.game.load.image('bg1','assets/bg/bg1.jpg');

    //山
    this.game.load.image('background_1','assets/bg/bg_1.jpg');
    this.game.load.image('background_1_1','assets/bg/bg_1_1.jpg');
    this.game.load.image('shan_text1','assets/bg/3-1.png');
    this.game.load.image('shan_text2','assets/bg/3-2.png');
    this.game.load.image('shan_text3','assets/bg/3-3.png');
    this.game.load.image('kuang','assets/bg/rect.png');
    this.game.load.spritesheet('shan_xlz0','assets/bg/mountain_0.png',375,278);
    this.game.load.spritesheet('shan_xlz1','assets/bg/mountain_1.png',375,278);
    this.game.load.spritesheet('shan_xlz2','assets/bg/mountain_2.png',375,278);
    this.game.load.spritesheet('shan_xlz3','assets/bg/mountain_3.png',375,278);
    this.game.load.spritesheet('shan_xlz4','assets/bg/mountain_4.png',375,278);
    this.game.load.spritesheet('shan_xlz5','assets/bg/mountain_5.png',375,278);
    this.game.load.audio('shan_mp3', 'assets/mountain.mp3');

    //海
    this.game.load.image('background2','assets/bg/bg_2_1.jpg');
    this.game.load.spritesheet('bg_2','assets/bg/bg_2.jpg',1176,1278);
    this.game.load.image('hai_text1','assets/bg/4-1.png');
    this.game.load.image('hai_text2','assets/bg/4-2.png');
    this.game.load.image('hai_text3','assets/bg/4-3.png');
    this.game.load.spritesheet('hai_xlz1','assets/bg/sea_0.png',375,105);
    this.game.load.spritesheet('hai_xlz2','assets/bg/sea_1.png',375,105);

    this.game.load.audio('hai_mp3', 'assets/sea.mp3');

    //闪电
    this.game.load.image('background3','assets/bg/bg_3_1.jpg');
    this.game.load.spritesheet('bg_3','assets/bg/bg_3.jpg',1176,1278);
    this.game.load.image('shandian_text1','assets/bg/5-1.png');
    this.game.load.image('shandian_text2','assets/bg/5-2.png');
    this.game.load.spritesheet('sd_xlz0','assets/bg/flash_0.png',375,334);
    this.game.load.spritesheet('sd_xlz1','assets/bg/flash_1.png',375,334);
    this.game.load.spritesheet('sd_xlz2','assets/bg/flash_2.png',375,334);
    this.game.load.spritesheet('sd_xlz3','assets/bg/flash_3.png',375,334);
    this.game.load.spritesheet('sd_xlz4','assets/bg/flash_4.png',375,334);
    this.game.load.spritesheet('sd_xlz5','assets/bg/flash_5.png',375,334);
    this.game.load.audio('shandian_mp3', 'assets/flash.mp3');

    //心
    this.game.load.image('background4','assets/bg/bg_4.jpg');
    this.game.load.image('xin_text1','assets/bg/6-1.png');
    this.game.load.image('xin_text2','assets/bg/6-2.png');
    this.game.load.image('xin_text3','assets/bg/6-3.png');
    this.game.load.spritesheet('xin_xlz1','assets/bg/heart_0.png',375,103);
    this.game.load.spritesheet('xin_xlz2','assets/bg/heart_1.png',375,103);
    this.game.load.audio('xin_mp3', 'assets/heart.mp3');

    //第二部分
    this.game.load.image('two_bg','assets/bg/two_bg.jpg');
    this.game.load.image('two_shou','assets/bg/7-1-btn.png');
    this.game.load.image('two_text','assets/bg/7-1-text.png');
    this.game.load.image('two_yuan','assets/bg/yuan.png');

    //扫描部分图片
    this.game.load.image('title_bg', 'assets/scan/title_bg.png');
    this.game.load.spritesheet('scan_title', 'assets/scan/scan_title.png',377,120,6);
    this.game.load.spritesheet('scan_txt', 'assets/scan/scan_txt.png',307,90,6);
    this.game.load.image('scan_bg', 'assets/scan/background.jpg');
    this.game.load.image('scan_line', 'assets/scan/scan_line.png');
    this.game.load.image('notice1', 'assets/scan/notice1.png');
    //扫描内的音乐
    this.game.load.audio('bk_mp3', 'assets/bk.mp3');
    this.game.load.audio('sjs_mp3', 'assets/sjs.mp3');
    this.game.load.audio('tyy_mp3', 'assets/tyy.mp3');
    this.game.load.audio('wm_mp3', 'assets/wm.mp3');
    this.game.load.audio('yb_mp3', 'assets/yb.mp3');
    this.game.load.audio('bz_mp3', 'assets/bz.mp3');

    //过渡页
    this.game.load.image('gdy_text1', 'assets/bg/gdy_text1.png');
    this.game.load.image('gdy_text2', 'assets/bg/gdy_text2.png');
    this.game.load.image('gdy_text3', 'assets/bg/gdy_text3.png');
    this.game.load.image('gdy_text4', 'assets/bg/gdy_text4.png');
    this.game.load.image('gdy_text5', 'assets/bg/gdy_text5.png');

    //视频页
    this.game.load.image('zly_bg', 'assets/bg/zly_bg.jpg');
    this.game.load.image('video1', 'assets/bg/video1.png');
    this.game.load.image('video1text', 'assets/bg/video1text.png');
    this.game.load.image('video2', 'assets/bg/video2.png');
    this.game.load.image('video2text', 'assets/bg/video2text.png');
    this.game.load.image('video3', 'assets/bg/video3.png');
    this.game.load.image('video3text', 'assets/bg/video3text.png');
    this.game.load.image('logo', 'assets/bg/logo.png');

  },

  create: function () {
    //this.asset.cropEnabled = false;
    //设置去那一页
    this.game.state.start('game1');
  },

  update: function () {
    if (!!this.ready) {

    }
  },

  //加载进度
  onFileComplete:function(progress, cacheKey, success, totalLoaded, totalFiles){
    console.log("File Complete: " + progress + "% - " + totalLoaded + " out of " + totalFiles);
  },
  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"/Users/sanchez/Sanchez/WORK/fact2016/src/js/states/test.js":[function(require,module,exports){
/**
 * Created by sanchez on 16/1/4.
 */
var InfoMask = require('../entities/InfoMask');
var CircleSvg = require('../entities/CircleSvg');
var Test = function () {
    this.infomask=null;
    this.cSvg=null;
};
module.exports = Test;
Test.prototype = {
    update:function(){
        //console.log(this.scan_line.angle);

        if(this.scan_line.angle>30){
            this.infomask.mask=null;
            this.trimask.alpha=0;

        }


        if((this.scan_line.angle>-20&&(this.music_flag==-1||!this.arr[this.music_flag].playing())&&!this.sline.isPaused)){
            this.music_flag++;
            console.log("sline run  music play ");
            for(var i in this.arr){
                this.arr[i].stop();
            }
            this.arr[this.music_flag].play(this.music_flag+'');
        }


    },
    create: function () {
        this.startPlay=false;

        this.firstInput=true;
        this.cSvg=new CircleSvg();
        this.cSvg.initCircle();
        this.game.world.setBounds(0, 0, 750,1206);
        //Pause  Notice
        this.pause_notice=this.game.add.sprite(375,603,'notice1');
        this.pause_notice.anchor.setTo(0.5);
        this.pause_notice.alpha=0;
//第二部分点击按钮
        this.two_shou=this.game.add.sprite(this.game.width/2,this.game.height/2+80,'two_shou');
        this.two_shou.scale.setTo(1);
        this.two_yuan=this.game.add.sprite(this.game.width/2-35,this.game.height/2+45,'two_yuan');
        this.two_yuan.scale.setTo(1);
        this.two_text=this.game.add.sprite(this.game.width/2-40,this.game.height/2+200,'two_text');
        this.two_text.scale.setTo(1);
//音乐
        this.music_flag=-1;
        this.arr = new Array(6);
        var _this=this;

        //this.mplaying=false;
        this.arr[0]=new Howl({
            src: ['assets/wm.mp3'],
            sprite: {
                0: [0, 6260],
            }

        });
        this.arr[1]=new Howl({
            src: ['assets/bz.mp3'],
            sprite: {
                1: [0, 6370],
            }

        });
        this.arr[2]=new Howl({
            src: ['assets/bk.mp3'],
            sprite: {
                2: [0, 6450]
            }
        });
        this.arr[3]=new Howl({
            src: ['assets/sjs.mp3'],
            sprite: {
                3: [0, 6260]
            }
        });
        this.arr[4]=new Howl({
            src: ['assets/yb.mp3'],
            sprite: {
                4: [0, 6320]
            }
        });
        this.arr[5]=new Howl({
            src: ['assets/tyy.mp3'],
            sprite: {
                5: [0, 6840]
            },
            onend: function() {
                _this.infomask.endOut();
                _this.scan_line.alpha=0;
                _this.svgdiv= document.getElementById("drawing");
                _this.svgdiv.style.display="none";
                _this.game.state.start('page_6');
                _this.cSvg.pauseCircle();
                _this.input.onDown.remove(_this.scanPlay, this);
                _this.input.onUp.remove(_this.scanPause, this);
            }
        });

        //
        //this.arr[0] =this.game.add.audio('wm_mp3');
        //this.arr[1] =this.game.add.audio('bz_mp3');
        //this.arr[2] =this.game.add.audio('bk_mp3');
        //this.arr[3] =this.game.add.audio('sjs_mp3');
        //this.arr[4] =this.game.add.audio('yb_mp3');
        //this.arr[5] =this.game.add.audio('tyy_mp3');

        //for(var i =0;i<5;i++){
        //    this.arr[i].onStop.add(function(){
        //        this.music_flag++;
        //    },this)
        //}
        //this.arr[5].onStop.add(function(){
        //    this.infomask.endOut();
        //    this.scan_line.alpha=0;
        //    this.svgdiv= document.getElementById("drawing");
        //    this.svgdiv.style.display="none";
        //    this.game.state.start('page_6');
        //    this.cSvg.pauseCircle();
        //    this.input.onDown.remove(this.scanPlay, this);
        //    this.input.onUp.remove(this.scanPause, this);
        //},this);


        this.infomask=new InfoMask(this.game,375,273,0);
        this.scan_line=this.game.add.sprite(375,802,'scan_line');
        this.scan_line.alpha=0;
        this.scan_line.anchor.setTo(1);
        this.scan_line.angle=180;
        //杆初始位置↑
        //4000等于转一圈的时间↓
        this.sline=this.game.add.tween( this.scan_line).to({rotation: Math.PI}, 6800, null, false, 0, 6, false);
        var f=function(){
                _this.trimask.alpha=1;
                _this.infomask.mask =  _this.trimask;
                        //切换图片
        };
        this.sline.onLoop.add(function(){
            this.infomask.fadeOut(f);
        },this);
        this.sline.onComplete.add(function(){


        },this);

        //120deg
        this.trimask=this.game.add.graphics(375, 802);
        this.trimask.beginFill(0xffffff);
        this.trimask.drawPolygon([0,0,1020,-600,0,1200]);
        this.infomask.mask =  this.trimask;
        //三角形↓
        this.tmask=this.game.add.tween(this.trimask).to({angle: 360}, 6800, null, false, 0, 5, false);

        this.input.onDown.add(this.scanPlay, this);
        this.input.onUp.add(this.scanPause, this);

    },
    //点击后
    scanPlay:function(){
        if(this.firstInput){

            this.two_shou.alpha=0;
            this.two_yuan.alpha=0;
            this.two_text.alpha=0;
            this.scan_line.alpha=1;
            console.log("start");
            this.sline.start();
            this.tmask.start();
            this.firstInput=false;
            this.cSvg.playCircle();
        }else {
            //松开后再次点击继续
            this.scan_line.alpha=1;
            this.two_shou.alpha=0;
            this.two_yuan.alpha=0;
            this.two_text.alpha=0;
            this.pause_notice.alpha=0;
            this.infomask.alpha=1;
            this.svgdiv= document.getElementById("drawing");
            this.svgdiv.style.opacity="1";

            this.sline.resume();
            this.tmask.resume();
            this.cSvg.resumeCircle();
            if(this.music_flag>=0){
                if(!this.arr[this.music_flag].playing()){

                    console.log("music resume");
                    this.arr[this.music_flag].play();
                }
            }


        }
    },
    //松开后
    scanPause:function(){
        this.cSvg.pauseCircle();
        this.svgdiv= document.getElementById("drawing");
        this.svgdiv.style.opacity="0";
        this.scan_line.alpha=0;
        this.pause_notice.alpha=1;
        this.infomask.alpha=0;
        this.sline.pause();
        this.tmask.pause();
        if(this.music_flag>=0){
            if( this.arr[this.music_flag].playing()){
                console.log("music pause");
                this.arr[this.music_flag].pause();
            }

        }



    }


};

},{"../entities/CircleSvg":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/CircleSvg.js","../entities/InfoMask":"/Users/sanchez/Sanchez/WORK/fact2016/src/js/entities/InfoMask.js"}]},{},["/Users/sanchez/Sanchez/WORK/fact2016/src/js/main.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvQ2lyY2xlU3ZnLmpzIiwic3JjL2pzL2VudGl0aWVzL0luZm9NYXNrLmpzIiwic3JjL2pzL2VudGl0aWVzL01vdmllQ2xpcC5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lMS5qcyIsInNyYy9qcy9zdGF0ZXMvcGFnZV8xLmpzIiwic3JjL2pzL3N0YXRlcy9wYWdlXzIuanMiLCJzcmMvanMvc3RhdGVzL3BhZ2VfMy5qcyIsInNyYy9qcy9zdGF0ZXMvcGFnZV80LmpzIiwic3JjL2pzL3N0YXRlcy9wYWdlXzUuanMiLCJzcmMvanMvc3RhdGVzL3BhZ2VfNi5qcyIsInNyYy9qcy9zdGF0ZXMvcGFnZV83LmpzIiwic3JjL2pzL3N0YXRlcy9wcmVsb2FkZXIuanMiLCJzcmMvanMvc3RhdGVzL3Rlc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHNhbmNoZXogb24gMTYvMS81LlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgQ2lyY2xlU3ZnID0gZnVuY3Rpb24gKCkge1xuXG59O1xuXG5DaXJjbGVTdmcucHJvdG90eXBlID0ge1xuICAgIC8vc3Zn5Yid5aeL5YyWXG4gICAgaW5pdENpcmNsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzU3RvcD1mYWxzZTtcbiAgICAgICAgdmFyIGxhc3RUaW1lID0gMDtcbiAgICAgICAgdmFyIHZlbmRvcnMgPSBbJ3dlYmtpdCcsICdtb3onXTtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArICdDYW5jZWxBbmltYXRpb25GcmFtZSddIHx8ICAgIC8vIFdlYmtpdOS4reatpOWPlua2iOaWueazleeahOWQjeWtl+WPmOS6hlxuICAgICAgICAgICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYuNyAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuICAgICAgICAgICAgICAgIH0sIHRpbWVUb0NhbGwpO1xuICAgICAgICAgICAgICAgIGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cblxuICAgICAgICB0aGlzLnN2Z1dpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcmF3aW5nXCIpLm9mZnNldFdpZHRoIC8gMjtcbiAgICAgICAgdGhpcy5zdmdIZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyYXdpbmdcIikub2Zmc2V0SGVpZ2h0IC8gMiArIDEwMDtcbiAgICAgICAgdGhpcy5tYXhSYWRpdXMgPSBNYXRoLnNxcnQodGhpcy5zdmdIZWlnaHQgKiB0aGlzLnN2Z0hlaWdodCArIHRoaXMuc3ZnV2lkdGggKiB0aGlzLnN2Z1dpZHRoKTtcblxuXG4gICAgICAgIC8vIGNyZWF0ZSBzdmcgZHJhd2luZ1xuICAgICAgICB0aGlzLmRyYXcgPSBTVkcoJ2RyYXdpbmcnKS5zaXplKCcxMDAlJywgJzEwMCUnKTtcblxuICAgIH0sXG4gICAgLy9zdmflnIbmkq3mlL5cbiAgICBwbGF5Q2lyY2xlOmZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuaXNTdG9wPWZhbHNlO1xuICAgICAgICB2YXIgX3RoaXM9dGhpcztcbiAgICAgICAgdGhpcy5jaXJjbGVBcnkgPSBbXTtcbiAgICAgICAgaWYoIXRoaXMuaXNTdG9wKXtcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlQXJ5WzBdID0gdGhpcy5jcmVhdGVDaXJjbGUoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tDaXJjbGUoKXtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNTdG9wKVxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjaGVja0NpcmNsZSk7XG5cbiAgICAgICAgICAgIGlmIChfdGhpcy5jaXJjbGVBcnkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBsYXN0Q2lyY2xlID0gX3RoaXMuY2lyY2xlQXJ5W190aGlzLmNpcmNsZUFyeS5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgICAgIGlmIChsYXN0Q2lyY2xlLndpZHRoKCkgPiAxMzApIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2lyY2xlQXJ5W190aGlzLmNpcmNsZUFyeS5sZW5ndGhdID0gX3RoaXMuY3JlYXRlQ2lyY2xlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmNpcmNsZUFyeVswXS53aWR0aCgpID4gX3RoaXMubWF4UmFkaXVzICogMS43KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNpcmNsZUFyeVswXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2lyY2xlQXJ5LnNoaWZ0KCk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tDaXJjbGUoKTtcbiAgICB9LFxuICAgIC8vc3Zn5ZyG5pqC5YGcXG4gICAgcGF1c2VDaXJjbGU6ZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5pc1N0b3A9dHJ1ZTtcbiAgICAgICAgZm9yKHZhciBpIGluIHRoaXMuY2lyY2xlQXJ5KXtcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlQXJ5W2ldLnBhdXNlKCk7XG5cbiAgICAgICAgfVxuICAgICAgICAvL3RoaXMuY2lyY2xlQXJ5ID0gW107XG4gICAgICAgIC8vdGhpcy5wbGF5Q2lyY2xlKCk7XG5cbiAgICB9LFxuXG4gICAgLy9zdmfmmoLlgZzlkI7nu6fnu61cbiAgICByZXN1bWVDaXJjbGU6ZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5pc1N0b3A9ZmFsc2U7XG4gICAgICAgIHZhciBfdGhpcz10aGlzO1xuICAgICAgICBmb3IodmFyIGkgaW4gdGhpcy5jaXJjbGVBcnkpIHtcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlQXJ5W2ldLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBTZCgpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNTdG9wKVxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShTZCk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuY2lyY2xlQXJ5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgd3d3dyA9IF90aGlzLmNpcmNsZUFyeVtfdGhpcy5jaXJjbGVBcnkubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgICAgICBpZiAod3d3dy53aWR0aCgpID4gMTMwKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNpcmNsZUFyeVtfdGhpcy5jaXJjbGVBcnkubGVuZ3RoXSA9IF90aGlzLmNyZWF0ZUNpcmNsZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jaXJjbGVBcnlbMF0ud2lkdGgoKSA+IF90aGlzLm1heFJhZGl1cyAqIDEuNykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jaXJjbGVBcnlbMF0ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNpcmNsZUFyeS5zaGlmdCgpO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9U2QoKVxuICAgIH0sXG4gICAgLy/liJvlu7pzdmflnIZcbiAgICBjcmVhdGVDaXJjbGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNpcmNsZSA9IHRoaXMuZHJhdy5jaXJjbGUoMSk7XG4gICAgICAgIGNpcmNsZS5hdHRyKHtcbiAgICAgICAgICAgIGZpbGw6ICdub25lJywgc3Ryb2tlOiAnIzRkNGQ0ZCcsICdzdHJva2Utd2lkdGgnOiAxLCAnc3Ryb2tlLWRhc2hhcnJheSc6ICc1LDUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNpcmNsZS5jZW50ZXIodGhpcy5zdmdXaWR0aCwgdGhpcy5zdmdIZWlnaHQpO1xuXG4vLyAgICAgICAgY2lyY2xlLmF0dHIoJ3dpZHRoJywgMSkuYW5pbWF0ZSgpLmF0dHIoJ3NpemUnLCAxMDAwKTtcbiAgICAgICAgLy/mr4/pmpQxMOenkuaUvuS4gOS4quWciFxuICAgICAgICAgICAgY2lyY2xlLmFuaW1hdGUoMTAwMDAsICc9Jykuc2l6ZSh0aGlzLm1heFJhZGl1cyAqIDIsIHRoaXMubWF4UmFkaXVzICogMik7XG4gICAgICAgIHJldHVybiBjaXJjbGU7XG4gICAgfVxuXG5cbn1cbm1vZHVsZS5leHBvcnRzID0gQ2lyY2xlU3ZnOyIsIi8qKlxuICogQ3JlYXRlZCBieSBzYW5jaGV6IG9uIDE2LzEvNC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciBJbmZvTWFzayA9IGZ1bmN0aW9uIChnYW1lLCBfeCwgX3ksIHROdW1iZXIpIHtcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgIHRoaXMuX3ggPSBfeDtcbiAgICB0aGlzLl95ID0gX3k7XG4gICAgdGhpcy5fdE51bWJlciA9IHROdW1iZXI7XG4gICAgdGhpcy5pID0gMDtcbiAgICB0aGlzLmogPSAwO1xuICAgIHRoaXMuZjE9dHJ1ZTtcbiAgICB0aGlzLmYyPXRydWU7XG5cbiAgICAvL3RpdGxlIDM3NyAxMjBcbiAgICAvL3R4dCAzMDcgOTBcblxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCB0aGlzLmdhbWUsIHRoaXMuX3gsIHRoaXMuX3kpO1xuICAgIHRoaXMudGl0bGVfYmcgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoMCwgMCwgJ3RpdGxlX2JnJyk7XG4gICAgdGhpcy5tdGl0bGUgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoLTM3NyAvIDIsIDAsICdzY2FuX3RpdGxlJywgdE51bWJlcik7XG5cbiAgICAvL3RoaXMuc2pzX21wMyA9IHRoaXMuZ2FtZS5hZGQuYXVkaW8oJ3Nqc19tcDMnKTtcbiAgICAvL3RoaXMudHl5X21wMyA9IHRoaXMuZ2FtZS5hZGQuYXVkaW8oJ3R5eV9tcDMnKTtcbiAgICAvL3ZhciB3bV9tcDMgPSB0aGlzLmdhbWUuYWRkLmF1ZGlvKCd3bV9tcDMnLCB0TnVtYmVyKTtcbiAgICAvL3RoaXMueWJfbXAzID0gdGhpcy5nYW1lLmFkZC5hdWRpbygneWJfbXAzJyk7XG4gICAgLy90aGlzLmJ6X21wMyA9IHRoaXMuZ2FtZS5hZGQuYXVkaW8oJ2J6X21wMycpO1xuICAgIC8vLy9cdENyZWF0ZSBhIG5ldyBiaXRtYXAgZGF0YSB0aGUgc2FtZSBzaXplIGFzIG91ciBwaWN0dXJlXG4gICAgLy90aGlzLmJtZCA9IHRoaXMuZ2FtZS5tYWtlLmJpdG1hcERhdGEoMzc3LCAxMjApO1xuICAgIC8vLy9cdEFuZCBjcmVhdGUgYW4gYWxwaGEgbWFzayBpbWFnZSBieSBjb21iaW5pbmcgcGljIGFuZCBtYXNrIGZyb20gdGhlIGNhY2hlXG4gICAgLy90aGlzLmJtZC5hbHBoYU1hc2sodGhpcy50aXRsZV9iZywgdGhpcy5tdGl0bGUpO1xuICAgIC8vLy92YXIgdGl0bGVfYmc9dGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCd0aXRsZV9iZycpO1xuICAgIC8vdGhpcy5zY2FuX3RpdGxlID0gdGhpcy5nYW1lLm1ha2Uuc3ByaXRlKC0zNzcgLyAyLCAwLCB0aGlzLmJtZCk7XG5cbiAgICB2YXIgc2Nhbl90eHQgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoLTMwNyAvIDIsIDE5MCwgJ3NjYW5fdHh0JywgdE51bWJlcik7XG4gICAgLy90aGlzLmFkZENoaWxkKHdtX21wMyk7XG4gICAgdGhpcy5hZGRDaGlsZChzY2FuX3R4dCk7XG5cbiAgICB0aGlzLmFkZENoaWxkKHRoaXMubXRpdGxlKTtcblxuXG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuSW5mb01hc2sucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5cbkluZm9NYXNrLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEluZm9NYXNrO1xuSW5mb01hc2sucHJvdG90eXBlLmZhZGVPdXQ9ZnVuY3Rpb24oYyl7XG4gICAgdmFyIF90aGlzPXRoaXM7XG4gICAgdmFyIGY9dGhpcy5nYW1lLmFkZC50d2Vlbih0aGlzKS50byh7YWxwaGE6MH0sMTAwMCxudWxsLHRydWUsMTAwMCk7XG4gICAgZi5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xuICAgICAgICBfdGhpcy5uZXh0VCgpO1xuICAgICAgICBjKCk7XG5cbiAgICB9LHRoaXMpXG59O1xuSW5mb01hc2sucHJvdG90eXBlLmVuZE91dD1mdW5jdGlvbigpe1xuICAgIHZhciBfdGhpcz10aGlzO1xuICAgIHZhciBmPXRoaXMuZ2FtZS5hZGQudHdlZW4odGhpcykudG8oe2FscGhhOjB9LDEwMDAsbnVsbCx0cnVlLDEwMDApO1xuICAgIGYub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcbiAgICAgICAgX3RoaXMucmVtb3ZlQ2hpbGQoKTtcbiAgICB9LHRoaXMpXG59O1xuLy/pm77pnL5pc2kuLi4uXG5JbmZvTWFzay5wcm90b3R5cGUubmV4dFQ9ZnVuY3Rpb24oKXtcbiAgICB0aGlzLnJlbW92ZUNoaWxkcmVuKCk7XG4gICAgdGhpcy5hbHBoYT0xO1xuICAgIHRoaXMuX3ROdW1iZXIrKztcbiAgICAvL3RoaXMudGl0bGVfYmcgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoLTI1MypNYXRoLnJhbmRvbSgpLCAtNzk5Kk1hdGgucmFuZG9tKCksICd0aXRsZV9iZycpO1xuICAgIHRoaXMubXRpdGxlID0gdGhpcy5nYW1lLm1ha2Uuc3ByaXRlKC0zNzcgLyAyLCAwLCAnc2Nhbl90aXRsZScsIHRoaXMuX3ROdW1iZXIpO1xuICAgIC8vXHRDcmVhdGUgYSBuZXcgYml0bWFwIGRhdGEgdGhlIHNhbWUgc2l6ZSBhcyBvdXIgcGljdHVyZVxuICAgIC8vdGhpcy5ibWQgPSB0aGlzLmdhbWUubWFrZS5iaXRtYXBEYXRhKDM3NywgMTIwKTtcbiAgICAvL1x0QW5kIGNyZWF0ZSBhbiBhbHBoYSBtYXNrIGltYWdlIGJ5IGNvbWJpbmluZyBwaWMgYW5kIG1hc2sgZnJvbSB0aGUgY2FjaGVcbiAgICAvL3RoaXMuYm1kLmFscGhhTWFzayh0aGlzLnRpdGxlX2JnLCB0aGlzLm10aXRsZSk7XG4gICAgLy92YXIgdGl0bGVfYmc9dGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCd0aXRsZV9iZycpO1xuICAgIC8vdGhpcy5zY2FuX3RpdGxlID0gdGhpcy5nYW1lLm1ha2Uuc3ByaXRlKC0zNzcgLyAyLCAwLCB0aGlzLmJtZCk7XG4gICAgdmFyIHNjYW5fdHh0ID0gdGhpcy5nYW1lLm1ha2Uuc3ByaXRlKC0zMDcgLyAyLCAxOTAsICdzY2FuX3R4dCcsIHRoaXMuX3ROdW1iZXIpO1xuXG5cblxuXG4gICAgdGhpcy5hZGRDaGlsZChzY2FuX3R4dCk7XG4gICAgdGhpcy5hZGRDaGlsZCh0aGlzLm10aXRsZSk7XG5cbiAgICAvL2dhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xuXG5cbn07XG5cbkluZm9NYXNrLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy90aGlzLnJlbW92ZUNoaWxkQXQoMSk7XG4gICAgLy9pZih0aGlzLmk+PTI1Myl0aGlzLmYxPWZhbHNlO1xuICAgIC8vXG4gICAgLy9pZih0aGlzLmo+PTc5OSl0aGlzLmYyPWZhbHNlO1xuICAgIC8vaWYodGhpcy5pPD0wKXRoaXMuZjE9dHJ1ZTtcbiAgICAvL2lmKHRoaXMuajw9MCl0aGlzLmYyPXRydWU7XG4gICAgLy9jb25zb2xlLmxvZyhcImk6XCIgK3RoaXMuaStcIiAgIGo6XCIrdGhpcy5qKTtcbiAgICAvL3RoaXMudGl0bGVfYmcgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoLXRoaXMuaSAsIC10aGlzLmosICd0aXRsZV9iZycpO1xuICAgIC8vdGhpcy5tdGl0bGUgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoMCwgMCwgJ3NjYW5fdGl0bGUnLHRoaXMuX3ROdW1iZXIpO1xuICAgIC8vLy9cdENyZWF0ZSBhIG5ldyBiaXRtYXAgZGF0YSB0aGUgc2FtZSBzaXplIGFzIG91ciBwaWN0dXJlXG4gICAgLy90aGlzLmJtZCA9IHRoaXMuZ2FtZS5tYWtlLmJpdG1hcERhdGEoMzc3LCAxMjApO1xuICAgIC8vLy9cdEFuZCBjcmVhdGUgYW4gYWxwaGEgbWFzayBpbWFnZSBieSBjb21iaW5pbmcgcGljIGFuZCBtYXNrIGZyb20gdGhlIGNhY2hlXG4gICAgLy90aGlzLmJtZC5hbHBoYU1hc2sodGhpcy50aXRsZV9iZywgIHRoaXMubXRpdGxlKTtcbiAgICAvLy8vdmFyIHRpdGxlX2JnPXRoaXMuZ2FtZS5hZGQuc3ByaXRlKDAsMCwndGl0bGVfYmcnKTtcbiAgICAvL3RoaXMuc2Nhbl90aXRsZSA9IHRoaXMuZ2FtZS5tYWtlLnNwcml0ZSgtMzc3IC8gMiwgMCwgdGhpcy5ibWQpO1xuICAgIC8vLy9jb25zb2xlLmxvZyh0aGlzLnRpdGxlX2JnLngpO1xuICAgIC8vdGhpcy5hZGRDaGlsZCh0aGlzLnNjYW5fdGl0bGUpO1xuICAgIC8vdGhpcy5mMT09dHJ1ZT90aGlzLmkrPTAuNTp0aGlzLmktPTAuNTtcbiAgICAvL3RoaXMuZjI9PXRydWU/dGhpcy5qKz0wLjU6dGhpcy5qLT0wLjU7XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW5mb01hc2s7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGRhaW1vbnMgb24gMTUvMTIvMTguXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5cbi8qXG7op4bpopHluo/liJfluKfmkq3mlL7nsbtcbiBAc3RhcnRJbmRleCDlvIDlp4vlm77niYfmlofku7bluo/liJdcbiBAZW5kSW5kZXgg57uT5p2f5Zu+54mH5paH5Lu25bqP5YiXXG4gQHggeSB3aWR0aCBoZWlnaHQg6KeG6aKR55qE5L2N572u5Y+K5a696auYXG4gQGZyYW1lV2lkdGgsZnJhbWVIZWlnaHQgIOW6j+WIl+W4p+e6ueeQhuWuvemrmFxuIEB0b3RhbEZyYW1lcyDop4bpopHluo/liJfluKfmgLvluKfmlbBcbiBAZnJhbWVSYXRlICDluKfpgJ/njocg5q+P56eS5bin5pWwXG4gQG9uQ29tcGxldGUg5pKt5pS+57uT5p2f5Zue6LCDXG4gKi9cblxuXG4vL3ByZWZpeCxzdGFydEluZGV4LGVuZEluZGV4LCxmcmFtZVdpZHRoLGZyYW1lSGVpZ2h0LHRvdGFsRnJhbWVzLGZyYW1lUmF0ZVxuXG52YXIgIE1vdmllQ2xpcCA9IGZ1bmN0aW9uKGdhbWUsX3gsX3ksX3dpZHRoLF9oZWlnaHQsdmlkZW9Db25maWcsb25Db21wbGV0ZSkge1xuICB0aGlzLmdhbWUgPSBnYW1lO1xuICB0aGlzLnZpZGVvQ29uZmlnID0gdmlkZW9Db25maWc7XG4gIHRoaXMuY3VyZW50SW5kZXggPSAhIXRoaXMudmlkZW9Db25maWc/dGhpcy52aWRlb0NvbmZpZy5nZXRTdGFydEluZGV4KCk6MDtcbiAgdGhpcy5feCA9IF94O1xuICB0aGlzLl95ID0gX3k7XG4gIHRoaXMuX3dpZHRoID0gX3dpZHRoO1xuICB0aGlzLl9oZWlnaHQgPSBfaGVpZ2h0O1xuICB0aGlzLl9wYXVzZSA9IGZhbHNlO1xuXG4gIHRoaXMuX3NjYWxlID0gdGhpcy5fd2lkdGgvdGhpcy52aWRlb0NvbmZpZy5mcmFtZVdpZHRoO1xuICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgdGhpcy5nYW1lLHRoaXMuX3gsdGhpcy5feSk7XG4gIHRoaXMuYW5jaG9yLnNldCgwKTtcbiAgdGhpcy5zcHJpdGUgPSBudWxsO1xuICBnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5Nb3ZpZUNsaXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5cbk1vdmllQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb3ZpZUNsaXA7XG5cbk1vdmllQ2xpcC5wcm90b3R5cGUucGxheVZpZGVvID0gZnVuY3Rpb24oKXtcbiAgaWYodGhpcy5zcHJpdGU9PW51bGwpIHtcbiAgICB0aGlzLnNwcml0ZSA9IHRoaXMuZ2FtZS5tYWtlLnNwcml0ZSgwLCAwLCB0aGlzLnZpZGVvQ29uZmlnLnByZWZpeCArIHRoaXMuY3VyZW50SW5kZXgpO1xuICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5zcHJpdGUpO1xuICB9XG4gIHRoaXMuYW5pbSA9IHRoaXMuc3ByaXRlLmFuaW1hdGlvbnMuYWRkKCdhbmltJyt0aGlzLmN1cmVudEluZGV4KTtcbiAgdGhpcy5hbmltLm9uQ29tcGxldGUuYWRkKHRoaXMub25BbmltYXRpb25GaW5pc2gsIHRoaXMpO1xuICB0aGlzLnNwcml0ZS5hbmNob3Iuc2V0KDApO1xuICB0aGlzLnNwcml0ZS5zY2FsZS5zZXQodGhpcy5fc2NhbGUpOyAgLy/ku6Xop4bpopHnmoTlrr3kuLrlh4ZcbiAgdGhpcy5zcHJpdGUuYW5pbWF0aW9ucy5wbGF5KCdhbmltJyt0aGlzLmN1cmVudEluZGV4LCB0aGlzLnZpZGVvQ29uZmlnLmZyYW1lUmF0ZSwgZmFsc2UpO1xufTtcblxuTW92aWVDbGlwLnByb3RvdHlwZS5vbkFuaW1hdGlvbkZpbmlzaCA9IGZ1bmN0aW9uKHBTZW5kZXIpe1xuICBjb25zb2xlLmxvZyhcIm9uQW5pbWF0aW9uRmluaXNoXCIpO1xuXG4gIHRoaXMuY3VyZW50SW5kZXgrKztcbiAgaWYgKHRoaXMuY3VyZW50SW5kZXg+dGhpcy52aWRlb0NvbmZpZy5lbmQpXG4gIHtcbiAgICBpZighIXRoaXMub25Db21wbGV0ZSB8fCB0eXBlb2YodGhpcy5vbkNvbXBsZXRlKT09J2Z1bmN0aW9uJylcbiAgICB7XG4gICAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuc3ByaXRlLmxvYWRUZXh0dXJlKHRoaXMudmlkZW9Db25maWcucHJlZml4K3RoaXMuY3VyZW50SW5kZXgsIDApO1xuICB0aGlzLmFuaW0gPSB0aGlzLnNwcml0ZS5hbmltYXRpb25zLmFkZCgnYW5pbScrdGhpcy5jdXJlbnRJbmRleCk7XG4gIHRoaXMuYW5pbS5vbkNvbXBsZXRlLmFkZCh0aGlzLm9uQW5pbWF0aW9uRmluaXNoLCB0aGlzKTtcbiAgdGhpcy5zcHJpdGUuYW5pbWF0aW9ucy5wbGF5KCdhbmltJyt0aGlzLmN1cmVudEluZGV4LCB0aGlzLnZpZGVvQ29uZmlnLmZyYW1lUmF0ZSwgZmFsc2UpO1xufTtcblxuXG4vL+aYr+WQpuaaguWBnFxuTW92aWVDbGlwLnByb3RvdHlwZS5pc1BhdXNlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fcGF1c2U7XG59O1xuXG5cbi8v5pqC5YGcXG5Nb3ZpZUNsaXAucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICBpZighIXRoaXMuc3ByaXRlKSB7XG4gICAgdGhpcy5zcHJpdGUuYW5pbWF0aW9ucy5zdG9wKCdhbmltJyArIHRoaXMuY3VyZW50SW5kZXgsIGZhbHNlKTtcbiAgICB0aGlzLl9wYXVzZSA9IHRydWU7XG4gIH1cbn07XG5cbi8v57un57ut5pKt5pS+XG5Nb3ZpZUNsaXAucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYoISF0aGlzLnNwcml0ZSkge1xuICAgIHRoaXMuc3ByaXRlLmFuaW1hdGlvbnMucGxheSgnYW5pbScgKyB0aGlzLmN1cmVudEluZGV4LCB0aGlzLnZpZGVvQ29uZmlnLmZyYW1lUmF0ZSwgZmFsc2UpO1xuICAgIGNvbnNvbGUubG9nKFwicmVzdW1lXCIpO1xuICAgIHRoaXMuX3BhdXNlID0gZmFsc2U7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTW92aWVDbGlwO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbi8vdmFyIFZpZGVvQ29uZmlnID0gcmVxdWlyZSgnLi9lbnRpdGllcy9WaWRlb0NvbmZpZycpO1xudmFyIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoNzUwLDEyMDYsIFBoYXNlci5DQU5WQVMsICdnYW1lJyxudWxsLHRydWUpO1xuXG5cbi8vd2luZG93LlV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xud2luZG93LnBsYXllclN0YXRlID0ge1xuICAgIGN1cnJlbnRMZXZlbDogJ0dhbWUnXG59O1xuXG5cbi8qXG7op4bpopHluo/liJfluKfnmoTmiYDmnInphY3nva7lhpnlnKjov5nph4xcbiAqL1xuXG5cbi8vd2luZG93LmludHJvbENvbmZpZyA9IG5ldyBWaWRlb0NvbmZpZyhnYW1lLFwiYXNzZXRzL3ZpZGVvL1wiLFwidmlkZW9fXCIsXCIuanBnXCIsMCw2OSwzMjAsNTY5LDksNjI3LDE1KTtcblxuXG5cbmdhbWUuc3RhdGUuYWRkKCdCb290JywgcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdCcpKTtcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XG5nYW1lLnN0YXRlLmFkZCgnR2FtZScsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWUnKSk7XG5nYW1lLnN0YXRlLmFkZCgnZ2FtZTEnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lMScpKTtcbmdhbWUuc3RhdGUuYWRkKCdwYWdlXzEnLCByZXF1aXJlKCcuL3N0YXRlcy9wYWdlXzEnKSk7XG5nYW1lLnN0YXRlLmFkZCgncGFnZV8yJywgcmVxdWlyZSgnLi9zdGF0ZXMvcGFnZV8yJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ3BhZ2VfMycsIHJlcXVpcmUoJy4vc3RhdGVzL3BhZ2VfMycpKTtcbmdhbWUuc3RhdGUuYWRkKCdwYWdlXzQnLCByZXF1aXJlKCcuL3N0YXRlcy9wYWdlXzQnKSk7XG5nYW1lLnN0YXRlLmFkZCgncGFnZV81JywgcmVxdWlyZSgnLi9zdGF0ZXMvcGFnZV81JykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ3BhZ2VfNicsIHJlcXVpcmUoJy4vc3RhdGVzL3BhZ2VfNicpKTtcbmdhbWUuc3RhdGUuYWRkKCdwYWdlXzcnLCByZXF1aXJlKCcuL3N0YXRlcy9wYWdlXzcnKSk7XG5nYW1lLnN0YXRlLmFkZCgndGVzdCcsIHJlcXVpcmUoJy4vc3RhdGVzL3Rlc3QnKSk7XG5nYW1lLnN0YXRlLnN0YXJ0KCdCb290Jyk7XG5cblxuIiwiXG52YXIgQm9vdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7XG5Cb290LnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdwcmVsb2FkZXInLCAnYXNzZXRzL3ByZWxvYWRlci5naWYnKTtcbiAgICB0aGlzLnN0YWdlLmJhY2tncm91bmRDb2xvciA9ICcjMDAwMDAwJztcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5nYW1lLmRldmljZS5kZXNrdG9wKSB7XG4gICAgICAvL3RoaXMuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuVVNFUl9TQ0FMRTtcbiAgICAgIHRoaXMuc2NhbGUuc2V0VXNlclNjYWxlKHdpbmRvdy5pbm5lcldpZHRoLzc1MCx3aW5kb3cuaW5uZXJXaWR0aC83NTAsMCwwKTtcbiAgICAgIC8vdGhpcy5zY2FsZS5zZXRNaW5NYXgoNDgwLCAyNjAsIDEwMjQsIDc2OCk7XG4gICAgICB0aGlzLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XG4gICAgICB0aGlzLnNjYWxlLnBhZ2VBbGlnblZlcnRpY2FsbHkgPSB0cnVlO1xuXG4gICAgfVxuXG4gICAgLy90aGlzLmdhbWUuaW5wdXQubWF4UG9pbnRlcnMgPSAxO1xuICAgIC8vXG4gICAgLy9pZiAodGhpcy5nYW1lLmRldmljZS5kZXNrdG9wKSB7XG4gICAgLy8gIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgdGhpcy5nYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgLy8gIHRoaXMuZ2FtZS5zY2FsZS5taW5XaWR0aCA9ICA0ODA7XG4gICAgLy8gIHRoaXMuZ2FtZS5zY2FsZS5taW5IZWlnaHQgPSAyNjA7XG4gICAgLy8gIHRoaXMuZ2FtZS5zY2FsZS5tYXhXaWR0aCA9IDY0MDtcbiAgICAvLyAgdGhpcy5nYW1lLnNjYWxlLm1heEhlaWdodCA9IDQ4MDtcbiAgICAvLyAgdGhpcy5nYW1lLnNjYWxlLmZvcmNlTGFuZHNjYXBlID0gdHJ1ZTtcbiAgICAvLyAgdGhpcy5nYW1lLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XG4gICAgLy8gIHRoaXMuZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgIC8vfVxuXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcbiAgfVxufTtcbiIsIi8vdmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xudmFyIE1vdmllQ2xpcCA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL01vdmllQ2xpcCcpO1xudmFyIEdhbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubW92aWVDbGlwID0gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gR2FtZTtcbkdhbWUucHJvdG90eXBlID0ge1xuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGJnMT10aGlzLmdhbWUuYWRkLnNwcml0ZSgwLDAsJ2JnMScpO1xuICAgICAgYmcxLnNjYWxlLnNldFRvKDIpO1xuICAgICAgdmFyIGhhbmQ9dGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoLzIsdGhpcy5nYW1lLmhlaWdodC8yLCdoYW5kJyk7XG4gICAgICBoYW5kLnNjYWxlLnNldFRvKDEpO1xuXG4gICAgICB2YXIgZ3JvdXAxPXRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICAgIHZhciBjaXJjbGVfMT1ncm91cDEuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTEwLHRoaXMuZ2FtZS5oZWlnaHQvMi0zMCwnY2lyY2xlXzEnKTtcbiAgICAgIGNpcmNsZV8xLnNjYWxlLnNldFRvKDEpO1xuICAgICAgdmFyIGNpcmNsZV8yPWdyb3VwMS5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItMjAsdGhpcy5nYW1lLmhlaWdodC8yLTMwLCdjaXJjbGVfMicpO1xuICAgICAgY2lyY2xlXzIuc2NhbGUuc2V0VG8oMSk7XG5cblxuICAgICAgdmFyIHR3ZWVuXz10aGlzLmdhbWUuYWRkLnR3ZWVuKGdyb3VwMSkudG8oe2FscGhhOjAuNSx4OisxMH0sNTAwLCdMaW5lYXInLHRydWUsMCwtMSx0cnVlKTtcblxuICAgICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcbn0sXG4gIG9uRG93bjpmdW5jdGlvbigpe1xuICAgICAgICAvL2NvbnNvbGUuICAgICAgJyk7XG5cbiAgICAgICAgdmFyIGhhbmQ9dGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoLzIsdGhpcy5nYW1lLmhlaWdodC8yLCdoYW5kJyk7XG5cbiAgICAgICAgdmFyIHR3ZWVuXz10aGlzLmdhbWUuYWRkLnR3ZWVuKGhhbmQpLnRvKHthbHBoYTowfSwxLCdMaW5lYXInLHRydWUpLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnZ2FtZTEnKTtcblxuICAgICAgICB9LHRoaXMpO1xuICAgIH0gLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIC8vdmFyIHgsIHksIGN4LCBjeSwgZHgsIGR5LCBhbmdsZSwgc2NhbGU7XG4gICAgLy9cbiAgICAvL3ggPSB0aGlzLmlucHV0LnBvc2l0aW9uLng7XG4gICAgLy95ID0gdGhpcy5pbnB1dC5wb3NpdGlvbi55O1xuICAgIC8vY3ggPSB0aGlzLndvcmxkLmNlbnRlclg7XG4gICAgLy9jeSA9IHRoaXMud29ybGQuY2VudGVyWTtcbiAgICAvL1xuICAgIC8vYW5nbGUgPSBNYXRoLmF0YW4yKHkgLSBjeSwgeCAtIGN4KSAqICgxODAgLyBNYXRoLlBJKTtcbiAgICAvL3RoaXMudGVzdGVudGl0eS5hbmdsZSA9IGFuZ2xlO1xuICAgIC8vXG4gICAgLy9keCA9IHggLSBjeDtcbiAgICAvL2R5ID0geSAtIGN5O1xuICAgIC8vc2NhbGUgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpIC8gMTAwO1xuICAgIC8vXG4gICAgLy90aGlzLnRlc3RlbnRpdHkuc2NhbGUueCA9IHNjYWxlICogMC42O1xuICAgIC8vdGhpcy50ZXN0ZW50aXR5LnNjYWxlLnkgPSBzY2FsZSAqIDAuNjtcbiAgfVxufTtcblxuXG5cblxuIiwiLy92YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGxheWVyJyk7XG52YXIgTW92aWVDbGlwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvTW92aWVDbGlwJyk7XG52YXIgZ2FtZTEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb3ZpZUNsaXAgPSBudWxsO1xufTtcbm1vZHVsZS5leHBvcnRzID0gZ2FtZTE7XG5cbmdhbWUxLnByb3RvdHlwZSA9IHtcbiAgICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygncGFnZSBnYW1lXzEnKTtcbiAgICAgICAgdmFyIGJnMT10aGlzLmdhbWUuYWRkLnNwcml0ZSgwLDAsJ2JnMScpO1xuICAgICAgICBiZzEuc2NhbGUuc2V0VG8oMik7XG5cbiAgICAgICAgdmFyIGdyb3VwMj10aGlzLmdhbWUuYWRkLmdyb3VwKCk7XG5cblxuXG4gICAgICAgIHZhciBkaWFuMT1ncm91cDIuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTMwMix0aGlzLmdhbWUuaGVpZ2h0LzItMzAsJ2RpYW4xJyk7XG4gICAgICAgIGRpYW4xLnNjYWxlLnNldFRvKDEpO1xuICAgICAgICB2YXIgZGlhbjFfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihkaWFuMSkudG8oe3g6MzUwfSwxNTAwLCdMaW5lYXInLHRydWUsNTAwKTtcblxuICAgICAgICB2YXIgZGlhbm1hc2s9dGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoLzItMzE4LHRoaXMuZ2FtZS5oZWlnaHQvMi0zMCwnZGlhbm1hc2snKTtcbiAgICAgICAgZGlhbm1hc2suc2NhbGUuc2V0VG8oMSk7XG5cbiAgICAgICAgdmFyIHR4dDE9Z3JvdXAyLmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgsdGhpcy5nYW1lLmhlaWdodC8yKzIwLCd0eHQxJyk7XG4gICAgICAgIHR4dDEuc2NhbGUuc2V0VG8oMSk7XG4gICAgICAgIHZhciB0eHQxX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4odHh0MSkudG8oe3g6MzgwfSw1MDAsJ0xpbmVhcicsdHJ1ZSk7XG5cbiAgICAgICAgdmFyIHR4dDI9Z3JvdXAyLmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMi0zNTAsdGhpcy5nYW1lLmhlaWdodC8yKzIwLCd0eHQyJyk7XG4gICAgICAgIHR4dDIuc2NhbGUuc2V0VG8oMSk7XG4gICAgICAgIHZhciB0eHQyX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4odHh0MikudG8oe3g6MzMyfSw1MDAsJ0xpbmVhcicsdHJ1ZSk7XG4gICAgICAgIHR4dDJfZGguY2hhaW4oZGlhbjFfZGgpO1xuXG4gICAgICAgIGRpYW4xX2RoLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgcz10aGlzLmdhbWUuYWRkLnR3ZWVuKGdyb3VwMikudG8oe2FscGhhOjB9LDEwMDAsJ0xpbmVhcicsdHJ1ZSkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ3BhZ2VfMScpO1xuXG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICB9LHRoaXMpO1xuICAgIH0gLFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICB9LFxuXG4gICAgY2xpY2tMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCEhdGhpcy5tb3ZpZUNsaXApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMubW92aWVDbGlwLmlzUGF1c2UoKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5yZXN1bWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbn07IiwiLy92YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGxheWVyJyk7XHJcbnZhciBNb3ZpZUNsaXAgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9Nb3ZpZUNsaXAnKTtcclxudmFyIHBhZ2VfMSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubW92aWVDbGlwID0gbnVsbDtcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBwYWdlXzE7XHJcblxyXG5wYWdlXzEucHJvdG90eXBlID0ge1xyXG4gICAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3BhZ2Ugc2hhbicpO1xyXG4gICAgICAgIHZhciBiZzExPXRoaXMuZ2FtZS5hZGQuc3ByaXRlKDAsMCwnYmcxJyk7XHJcbiAgICAgICAgYmcxMS5zY2FsZS5zZXRUbygyKTtcclxuXHJcbiAgICAgICAgdmFyIGdyb3VwMz10aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICAgICAgdmFyIGJnMT1ncm91cDMuY3JlYXRlKDAsMCwnYmFja2dyb3VuZF8xJyk7XHJcbiAgICAgICAgYmcxLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHZhciBiZzFfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihiZzEpLnRvKHt4Oi0yMDB9LDYwMDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2hhbl90ZXh0MT1ncm91cDMuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTEwMCx0aGlzLmdhbWUuaGVpZ2h0LzIrNTIsJ3NoYW5fdGV4dDEnKTtcclxuICAgICAgICBzaGFuX3RleHQxLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHNoYW5fdGV4dDEuYWxwaGE9MDtcclxuXHJcbiAgICAgICAgdmFyIHNoYW5fdGV4dDFfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihzaGFuX3RleHQxKS50byh7YWxwaGE6MSx4OjMzMH0sMTAwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmFyIHNoYW5fdGV4dDI9Z3JvdXAzLmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMi00NSx0aGlzLmdhbWUuaGVpZ2h0LzIrMjc2LCdzaGFuX3RleHQyJyk7XHJcbiAgICAgICAgc2hhbl90ZXh0Mi5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICBzaGFuX3RleHQyLmFscGhhPTA7XHJcbiAgICAgICAgdmFyIHNoYW5fdGV4dDJfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihzaGFuX3RleHQyKS50byh7YWxwaGE6MX0sMTAwMCwnTGluZWFyJyx0cnVlLDEwMDApO1xyXG5cclxuICAgICAgICB2YXIgc2hhbl90ZXh0Mz1ncm91cDMuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yKzQ1LHRoaXMuZ2FtZS5oZWlnaHQvMis1Miwnc2hhbl90ZXh0MycpO1xyXG4gICAgICAgIHNoYW5fdGV4dDMuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgc2hhbl90ZXh0My5hbHBoYT0wO1xyXG4gICAgICAgIHZhciBzaGFuX3RleHQzX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oc2hhbl90ZXh0MykudG8oe2FscGhhOjEseDozOTV9LDEwMDAsJ0xpbmVhcicsdHJ1ZSwxNTAwKTtcclxuXHJcbiAgICAgICAgdmFyIGt1YW5nPWdyb3VwMy5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItNTUsdGhpcy5nYW1lLmhlaWdodC8yKzI3Mywna3VhbmcnKTtcclxuICAgICAgICBrdWFuZy5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICBrdWFuZy5hbHBoYT0wO1xyXG4gICAgICAgIHZhciBrdWFuZ19kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGt1YW5nKS50byh7YWxwaGE6MX0sMTAwMCwnTGluZWFyJyx0cnVlLDEwMDApO1xyXG5cclxuICAgICAgICB2YXIgbXVzaWMgPSB0aGlzLmdhbWUuYWRkLmF1ZGlvKCdzaGFuX21wMycpO1xyXG4gICAgICAgIG11c2ljLnBsYXkoKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBzaDE9Z3JvdXAzLmNyZWF0ZSgwLDAsJ3NoYW5feGx6MCcpO1xyXG4gICAgICAgIHNoMS5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICBzaDEuYW5pbWF0aW9ucy5hZGQoJ3NoYW5feGx6MCcpO1xyXG4gICAgICAgIHNoMS5raWxsT25Db21wbGV0ZT1mYWxzZTtcclxuICAgICAgICBzaDEuYW5pbWF0aW9ucy5wbGF5KCdzaGFuX3hsejAnLDE1LGZhbHNlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgdmFyIHNoMj1ncm91cDMuY3JlYXRlKDAsMCwnc2hhbl94bHoxJyk7XHJcbiAgICAgICAgICAgIHNoMi5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICAgICAgc2gyLmFuaW1hdGlvbnMuYWRkKCdzaGFuX3hsejEnKTtcclxuICAgICAgICAgICAgc2gyLmtpbGxPbkNvbXBsZXRlPWZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICBzaDIuYW5pbWF0aW9ucy5wbGF5KCdzaGFuX3hsejEnLDE1LGZhbHNlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzaDM9Z3JvdXAzLmNyZWF0ZSgwLDAsJ3NoYW5feGx6MicpO1xyXG4gICAgICAgICAgICAgICAgc2gzLnNjYWxlLnNldFRvKDIpO1xyXG4gICAgICAgICAgICAgICAgc2gzLmFuaW1hdGlvbnMuYWRkKCdzaGFuX3hsejInKTtcclxuICAgICAgICAgICAgICAgIHNoMy5raWxsT25Db21wbGV0ZT1mYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBfX3RoaXMgPSBfdGhpcztcclxuICAgICAgICAgICAgICAgIHNoMy5hbmltYXRpb25zLnBsYXkoJ3NoYW5feGx6MicsMTUsZmFsc2UpLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaDQ9Z3JvdXAzLmNyZWF0ZSgwLDAsJ3NoYW5feGx6MycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNoNC5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICAgICAgICAgICAgICBzaDQuYW5pbWF0aW9ucy5hZGQoJ3NoYW5feGx6MycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNoNC5raWxsT25Db21wbGV0ZT1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX19fdGhpcyA9IF9fdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBzaDQuYW5pbWF0aW9ucy5wbGF5KCdzaGFuX3hsejMnLDE1LGZhbHNlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoNT1ncm91cDMuY3JlYXRlKDAsMCwnc2hhbl94bHo0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoNS5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2g1LmFuaW1hdGlvbnMuYWRkKCdzaGFuX3hsejQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2g1LmtpbGxPbkNvbXBsZXRlPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX19fX3RoaXMgPSBfX190aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDUuYW5pbWF0aW9ucy5wbGF5KCdzaGFuX3hsejQnLDE1LGZhbHNlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaDY9Z3JvdXAzLmNyZWF0ZSgwLDAsJ3NoYW5feGx6NScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2LnNjYWxlLnNldFRvKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2LmFuaW1hdGlvbnMuYWRkKCdzaGFuX3hsejUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNi5hbmltYXRpb25zLnBsYXkoJ3NoYW5feGx6NScsMTUsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LHRoaXMpO1xyXG5cclxuICAgICAgICBiZzFfZGgub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGJnMV9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGJnMSkuZnJvbSh7fSwxLCdMaW5lYXInLHRydWUpO1xyXG4gICAgICAgICAgICB2YXIgcz10aGlzLmdhbWUuYWRkLnR3ZWVuKGdyb3VwMykudG8oe2FscGhhOjB9LDEwMDAsJ0xpbmVhcicsdHJ1ZSkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgncGFnZV8yJyk7XHJcblxyXG4gICAgICAgICAgICB9LHRoaXMpO1xyXG4gICAgICAgIH0sdGhpcyk7XHJcbiAgICB9ICxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGNsaWNrTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKCEhdGhpcy5tb3ZpZUNsaXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1vdmllQ2xpcC5pc1BhdXNlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92aWVDbGlwLnJlc3VtZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZpZUNsaXAucGF1c2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgeGlhb3Fpbmcgb24gMjAxNS8xMi8yMy5cclxuICovXHJcbi8vdmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xyXG52YXIgTW92aWVDbGlwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvTW92aWVDbGlwJyk7XHJcbnZhciBwYWdlXzIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLm1vdmllQ2xpcCA9IG51bGw7XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gcGFnZV8yO1xyXG5wYWdlXzIucHJvdG90eXBlID0ge1xyXG5cclxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwYWdlIGhhaScpO1xyXG4gICAgICAgIHZhciBiZzE9dGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCdiZzEnKTtcclxuICAgICAgICBiZzEuc2NhbGUuc2V0VG8oMSk7XHJcblxyXG5cclxuICAgICAgICB2YXIgZ3JvdXA0PXRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgICAgICB2YXIgdDE9Z3JvdXA0LmNyZWF0ZSgwLDAsJ2JnXzInKTtcclxuICAgICAgICB0MS5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB0MS5hbmltYXRpb25zLmFkZCgnYmdfMicpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBoYWlfdGV4dDE9Z3JvdXA0LmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMix0aGlzLmdhbWUuaGVpZ2h0LTI0MSwnaGFpX3RleHQxJyk7XHJcbiAgICAgICAgaGFpX3RleHQxLnNjYWxlLnNldFRvKDEpO1xyXG5cclxuICAgICAgICB2YXIgaGFpX3RleHQxX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oaGFpX3RleHQxKS50byh7eTo3MjR9LDUwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmFyIGhhaV90ZXh0Mj1ncm91cDQuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTEwLHRoaXMuZ2FtZS5oZWlnaHQtMTk1LCdoYWlfdGV4dDInKTtcclxuICAgICAgICBoYWlfdGV4dDIuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIGhhaV90ZXh0Ml9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGhhaV90ZXh0MikudG8oe3k6ODIwfSw3MDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciBoYWlfdGV4dDM9Z3JvdXA0LmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMix0aGlzLmdhbWUuaGVpZ2h0LTEzMSwnaGFpX3RleHQzJyk7XHJcbiAgICAgICAgaGFpX3RleHQzLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHZhciBoYWlfdGV4dDNfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihoYWlfdGV4dDMpLnRvKHt5Ojk0NH0sMTAwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmFyIG11c2ljMSA9IHRoaXMuZ2FtZS5hZGQuYXVkaW8oJ2hhaV9tcDMnKTtcclxuICAgICAgICBtdXNpYzEucGxheSgpO1xyXG5cclxuICAgICAgICB2YXIgaDE9Z3JvdXA0LmNyZWF0ZSgwLDI1NCwnaGFpX3hsejEnKTtcclxuICAgICAgICBoMS5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICBoMS5hbmltYXRpb25zLmFkZCgnaGFpX3hsejEnKTtcclxuICAgICAgICBoMS5raWxsT25Db21wbGV0ZT1mYWxzZTtcclxuICAgICAgICB0MS5hbmltYXRpb25zLnBsYXkoJ2JnXzInLDEsdHJ1ZSk7XHJcbiAgICAgICAgaDEuYW5pbWF0aW9ucy5wbGF5KCdoYWlfeGx6MScsMTUsZmFsc2UpLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBoMj1ncm91cDQuY3JlYXRlKDAsMjU0LCdoYWlfeGx6MicpO1xyXG5cclxuICAgICAgICAgICAgaDIuc2NhbGUuc2V0VG8oMik7XHJcbiAgICAgICAgICAgIGgyLmFuaW1hdGlvbnMuYWRkKCdoYWlfeGx6MicpO1xyXG4gICAgICAgICAgICBoMi5hbmltYXRpb25zLnBsYXkoJ2hhaV94bHoyJywxNSx0cnVlKTtcclxuICAgICAgICB9LHRoaXMpO1xyXG5cclxuICAgICAgICBoYWlfdGV4dDFfZGgub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGhhaV90ZXh0MV9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGhhaV90ZXh0MSkuZnJvbSh7fSwxMCwnTGluZWFyJyx0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHMyPXRoaXMuZ2FtZS5hZGQudHdlZW4oZ3JvdXA0KS50byh7YWxwaGE6MH0sMTAwMCwnTGluZWFyJyx0cnVlLDQwMDApLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ3BhZ2VfMycpO1xyXG4gICAgICAgICAgICB9LHRoaXMpO1xyXG4gICAgICAgIH0sdGhpcyk7XHJcbiAgICB9ICxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGNsaWNrTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKCEhdGhpcy5tb3ZpZUNsaXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1vdmllQ2xpcC5pc1BhdXNlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92aWVDbGlwLnJlc3VtZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZpZUNsaXAucGF1c2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgeGlhb3Fpbmcgb24gMjAxNS8xMi8yMy5cclxuICovXHJcbi8vdmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xyXG52YXIgTW92aWVDbGlwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvTW92aWVDbGlwJyk7XHJcbnZhciBwYWdlXzMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLm1vdmllQ2xpcCA9IG51bGw7XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gcGFnZV8zO1xyXG5cclxucGFnZV8zLnByb3RvdHlwZSA9IHtcclxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwYWdlIHNoYW5kaWFuJyk7XHJcbiAgICAgICAgdmFyIGJnMT10aGlzLmdhbWUuYWRkLnNwcml0ZSgwLDAsJ2JnMScpO1xyXG4gICAgICAgIGJnMS5zY2FsZS5zZXRUbygyKTtcclxuXHJcbiAgICAgICAgdmFyIGdyb3VwNT10aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcblxyXG4gICAgICAgIHZhciB0MT1ncm91cDUuY3JlYXRlKDAsMCwnYmdfMycpO1xyXG4gICAgICAgIHQxLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHQxLmFuaW1hdGlvbnMuYWRkKCdiZ18zJyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgdmFyIHNoYW5kaWFuX3RleHQxPWdyb3VwNS5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItMTAsdGhpcy5nYW1lLmhlaWdodC8yKzUwLCdzaGFuZGlhbl90ZXh0MScpO1xyXG4gICAgICAgIHNoYW5kaWFuX3RleHQxLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHNoYW5kaWFuX3RleHQxLmFscGhhPTA7XHJcbiAgICAgICAgdmFyIHNoYW5kaWFuX3RleHQxX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oc2hhbmRpYW5fdGV4dDEpLnRvKHthbHBoYToxfSwxMDAwLCdMaW5lYXInLHRydWUsNTAwKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBzaGFuZGlhbl90ZXh0Mj1ncm91cDUuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLHRoaXMuZ2FtZS5oZWlnaHQvMis3NTAsJ3NoYW5kaWFuX3RleHQyJyk7XHJcbiAgICAgICAgc2hhbmRpYW5fdGV4dDIuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgc2hhbmRpYW5fdGV4dDIuYWxwaGE9MDtcclxuICAgICAgICB2YXIgc2hhbmRpYW5fdGV4dDJfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihzaGFuZGlhbl90ZXh0MikudG8oe2FscGhhOjEseTo4MDB9LDEwMDAsJ0xpbmVhcicsdHJ1ZSwxMDAwKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBtdXNpYzIgPSB0aGlzLmdhbWUuYWRkLmF1ZGlvKCdzaGFuZGlhbl9tcDMnKTtcclxuICAgICAgICBtdXNpYzIucGxheSgpO1xyXG5cclxuICAgICAgICB2YXIgczA9Z3JvdXA1LmNyZWF0ZSgwLDAsJ3NkX3hsejAnKTtcclxuICAgICAgICBzMC5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICBzMC5hbmltYXRpb25zLmFkZCgnc2RfeGx6MCcpO1xyXG4gICAgICAgIHMwLmtpbGxPbkNvbXBsZXRlPXRydWU7XHJcbiAgICAgICAgczAuYW5pbWF0aW9ucy5wbGF5KCdzZF94bHowJywxNSxmYWxzZSkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHMxPWdyb3VwNS5jcmVhdGUoMCwwLCdzZF94bHoxJyk7XHJcbiAgICAgICAgICAgIHMxLnNjYWxlLnNldFRvKDIpO1xyXG4gICAgICAgICAgICBzMS5hbmltYXRpb25zLmFkZCgnc2RfeGx6MScpO1xyXG4gICAgICAgICAgICBzMS5raWxsT25Db21wbGV0ZT10cnVlO1xyXG5cclxuICAgICAgICAgICAgczEuYW5pbWF0aW9ucy5wbGF5KCdzZF94bHoxJywxNSxmYWxzZSkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgczIgPWdyb3VwNS5jcmVhdGUoMCwgMCwgJ3NkX3hsejInKTtcclxuICAgICAgICAgICAgICAgIHMyLnNjYWxlLnNldFRvKDIpO1xyXG4gICAgICAgICAgICAgICAgczIuYW5pbWF0aW9ucy5hZGQoJ3NkX3hsejInKTtcclxuICAgICAgICAgICAgICAgIHMyLmtpbGxPbkNvbXBsZXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHQxLmFuaW1hdGlvbnMucGxheSgnYmdfMycsMix0cnVlKTtcclxuICAgICAgICAgICAgICAgIHMyLmFuaW1hdGlvbnMucGxheSgnc2RfeGx6MicsIDE1LCBmYWxzZSkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzMyA9Z3JvdXA1LmNyZWF0ZSgwLCAwLCAnc2RfeGx6MycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMzLnNjYWxlLnNldFRvKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHMzLmFuaW1hdGlvbnMuYWRkKCdzZF94bHozJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgczMua2lsbE9uQ29tcGxldGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzMy5hbmltYXRpb25zLnBsYXkoJ3NkX3hsejMnLCAxNSwgZmFsc2UpLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHM0ID0gZ3JvdXA1LmNyZWF0ZSgwLCAwLCAnc2RfeGx6NCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzNC5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgczQuYW5pbWF0aW9ucy5hZGQoJ3NkX3hsejQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgczQua2lsbE9uQ29tcGxldGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgczQuYW5pbWF0aW9ucy5wbGF5KCdzZF94bHo0JywgMTUsIGZhbHNlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgczUgPSBncm91cDUuY3JlYXRlKDAsIDAsICdzZF94bHo1Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzNS5zY2FsZS5zZXRUbygyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM1LmFuaW1hdGlvbnMuYWRkKCdzZF94bHo1Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczUuYW5pbWF0aW9ucy5wbGF5KCdzZF94bHo1JywgMTUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LHRoaXMpO1xyXG5cclxuICAgICAgICBzaGFuZGlhbl90ZXh0MV9kaC5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgc2hhbmRpYW5fdGV4dDFfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihzaGFuZGlhbl90ZXh0MSkuZnJvbSh7fSwxLCdMaW5lYXInLHRydWUpO1xyXG4gICAgICAgICAgICB2YXIgczU9dGhpcy5nYW1lLmFkZC50d2Vlbihncm91cDUpLnRvKHthbHBoYTowfSwxMDAwLCdMaW5lYXInLHRydWUsNTAwMCkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ3BhZ2VfNCcpIDtcclxuXHJcblxyXG4gICAgICAgICAgICB9LHRoaXMpO1xyXG5cclxuICAgICAgICB9LHRoaXMpO1xyXG4gICAgfSAsXHJcblxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja0xpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighIXRoaXMubW92aWVDbGlwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tb3ZpZUNsaXAuaXNQYXVzZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92aWVDbGlwLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHhpYW9xaW5nIG9uIDIwMTUvMTIvMjMuXHJcbiAqL1xyXG4vL3ZhciBQbGF5ZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9wbGF5ZXInKTtcclxudmFyIE1vdmllQ2xpcCA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL01vdmllQ2xpcCcpO1xyXG52YXIgcGFnZV80ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5tb3ZpZUNsaXAgPSBudWxsO1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IHBhZ2VfNDtcclxuXHJcbnBhZ2VfNC5wcm90b3R5cGUgPSB7XHJcblxyXG4gICAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3BhZ2Ugd2VuemknKTtcclxuICAgICAgICB2YXIgYmcxPXRoaXMuZ2FtZS5hZGQuc3ByaXRlKDAsMCwnYmcxJyk7XHJcbiAgICAgICAgYmcxLnNjYWxlLnNldFRvKDIpO1xyXG5cclxuICAgICAgICB2YXIgZ3JvdXA2PXRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgICAgICB2YXIgYmc0PWdyb3VwNi5jcmVhdGUoMCwwLCdiYWNrZ3JvdW5kNCcpO1xyXG4gICAgICAgIGJnNC5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgYmc0X2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oYmc0KS50byh7eDotMjAwfSw2MDAwLCdMaW5lYXInLHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgeGluX3RleHQxPWdyb3VwNi5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItNzUwLHRoaXMuZ2FtZS5oZWlnaHQvMiwneGluX3RleHQxJyk7XHJcbiAgICAgICAgeGluX3RleHQxLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHhpbl90ZXh0MS5hbHBoYT0wO1xyXG4gICAgICAgIHZhciB4aW5fdGV4dDFfZGg9dGhpcy5nYW1lLmFkZC50d2Vlbih4aW5fdGV4dDEpLnRvKHthbHBoYToxLHg6MzA5fSwxMDAwLCdMaW5lYXInLHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgeGluX3RleHQyPWdyb3VwNi5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzIrNzUwLHRoaXMuZ2FtZS5oZWlnaHQvMiwneGluX3RleHQyJyk7XHJcbiAgICAgICAgeGluX3RleHQyLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHhpbl90ZXh0Mi5hbHBoYT0wO1xyXG4gICAgICAgIHZhciB4aW5fdGV4dDJfZGg9dGhpcy5nYW1lLmFkZC50d2Vlbih4aW5fdGV4dDIpLnRvKHthbHBoYToxLHg6Mzg2fSwxMDAwLCdMaW5lYXInLHRydWUsMTUwMCk7XHJcblxyXG5cclxuICAgICAgICB2YXIgeGluX3RleHQzPWdyb3VwNi5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItODAsdGhpcy5nYW1lLmhlaWdodC8yKzE3MCwneGluX3RleHQzJyk7XHJcbiAgICAgICAgeGluX3RleHQzLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHhpbl90ZXh0My5hbHBoYT0wO1xyXG4gICAgICAgIHZhciB4aW5fdGV4dDNfZGg9dGhpcy5nYW1lLmFkZC50d2Vlbih4aW5fdGV4dDMpLnRvKHthbHBoYToxfSwxMDAwLCdMaW5lYXInLHRydWUsMTAwMCk7XHJcblxyXG4gICAgICAgIHZhciBtdXNpYzMgPSB0aGlzLmdhbWUuYWRkLmF1ZGlvKCd4aW5fbXAzJyk7XHJcbiAgICAgICAgbXVzaWMzLnBsYXkoKTtcclxuXHJcbiAgICAgICAgdmFyIHgxPWdyb3VwNi5jcmVhdGUoMCwyNTYsJ3hpbl94bHoxJyk7XHJcbiAgICAgICAgeDEuc2NhbGUuc2V0VG8oMik7XHJcbiAgICAgICAgeDEuYW5pbWF0aW9ucy5hZGQoJ3hpbl94bHoxJyk7XHJcbiAgICAgICAgeDEua2lsbE9uQ29tcGxldGU9ZmFsc2U7XHJcbiAgICAgICAgeDEuYW5pbWF0aW9ucy5wbGF5KCd4aW5feGx6MScsMTUsZmFsc2UpLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB4Mj1ncm91cDYuY3JlYXRlKDAsMjU2LCd4aW5feGx6MicpO1xyXG5cclxuICAgICAgICAgICAgeDIuc2NhbGUuc2V0VG8oMik7XHJcbiAgICAgICAgICAgIHgyLmFuaW1hdGlvbnMuYWRkKCd4aW5feGx6MicpO1xyXG4gICAgICAgICAgICB4Mi5hbmltYXRpb25zLnBsYXkoJ3hpbl94bHoyJywxNSx0cnVlKTtcclxuXHJcbiAgICAgICAgfSx0aGlzKTtcclxuICAgICAgICBiZzRfZGgub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGJnNF9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGJnNCkuZnJvbSh7fSwxMCwnTGluZWFyJyx0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHM1PXRoaXMuZ2FtZS5hZGQudHdlZW4oZ3JvdXA2KS50byh7YWxwaGE6MH0sMTAwMCwnTGluZWFyJyx0cnVlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgndGVzdCcpIDtcclxuICAgICAgICAgICAgfSx0aGlzKTtcclxuXHJcbiAgICAgICAgfSx0aGlzKTtcclxuICAgIH0gLFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgY2xpY2tMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoISF0aGlzLm1vdmllQ2xpcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubW92aWVDbGlwLmlzUGF1c2UoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZpZUNsaXAucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5wYXVzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSB4aWFvcWluZyBvbiAyMDE1LzEyLzIzLlxyXG4gKi9cclxuLy92YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGxheWVyJyk7XHJcbnZhciBNb3ZpZUNsaXAgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9Nb3ZpZUNsaXAnKTtcclxudmFyIHBhZ2VfNSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubW92aWVDbGlwID0gbnVsbDtcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBwYWdlXzU7XHJcblxyXG5wYWdlXzUucHJvdG90eXBlID0ge1xyXG5cclxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwYWdlIGRpZXJidWZlbicpO1xyXG4gICAgICAgIHZhciBiZzE9dGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCdiZzEnKTtcclxuICAgICAgICBiZzEuc2NhbGUuc2V0VG8oMik7XHJcblxyXG4gICAgICAgIHZhciB0d29fYmc9dGhpcy5nYW1lLmFkZC5zcHJpdGUoMCwwLCd0d29fYmcnKTtcclxuICAgICAgICB0d29fYmcuc2NhbGUuc2V0VG8oMSk7XHJcblxyXG4gICAgICAgIHZhciB0d29fc2hvdT10aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmdhbWUud2lkdGgvMix0aGlzLmdhbWUuaGVpZ2h0LzIrODAsJ3R3b19zaG91Jyk7XHJcbiAgICAgICAgdHdvX3Nob3Uuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIHR3b19zaG91X2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4odHdvX3Nob3UpLmZyb20oe2JsZW5kTW9kZTo1MH0sMTAwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmFyIHR3b195dWFuPXRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53aWR0aC8yLTM1LHRoaXMuZ2FtZS5oZWlnaHQvMis0NSwndHdvX3l1YW4nKTtcclxuICAgICAgICB0d29feXVhbi5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgdHdvX3l1YW5fZGg9dGhpcy5nYW1lLmFkZC50d2Vlbih0d29feXVhbikudG8oe3dvcmxkUm90YXRpb246MjN9LDEwMDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciB0d29fdGV4dD10aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmdhbWUud2lkdGgvMi00MCx0aGlzLmdhbWUuaGVpZ2h0LzIrNTAwLCd0d29fdGV4dCcpO1xyXG4gICAgICAgIHR3b190ZXh0LnNjYWxlLnNldFRvKDEpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMueGlhLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy54aWEsIHRoaXMpO1xyXG4gICAgfSxcclxuICAgIHhpYTpmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vY29uc29sZS4gICAgICAnKTtcclxuXHJcbiAgICAgICAgdmFyIGhhbmQ9dGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoLzIsdGhpcy5nYW1lLmhlaWdodC8yLCdoYW5kJyk7XHJcblxyXG4gICAgICAgIHZhciB0d2Vlbl89dGhpcy5nYW1lLmFkZC50d2VlbihoYW5kKS50byh7YWxwaGE6MH0sMSwnTGluZWFyJyx0cnVlKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCd0ZXN0Jyk7XHJcblxyXG4gICAgICAgIH0sdGhpcyk7XHJcbiAgICB9ICxcclxuXHJcblxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja0xpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighIXRoaXMubW92aWVDbGlwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tb3ZpZUNsaXAuaXNQYXVzZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92aWVDbGlwLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07IiwiLy92YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGxheWVyJyk7XHJcbnZhciBNb3ZpZUNsaXAgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9Nb3ZpZUNsaXAnKTtcclxudmFyIHBhZ2VfNiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubW92aWVDbGlwID0gbnVsbDtcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBwYWdlXzY7XHJcblxyXG5wYWdlXzYucHJvdG90eXBlID0ge1xyXG4gICAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3BhZ2UgZ3VvZHV5ZScpO1xyXG5cclxuICAgICAgICB2YXIgZ3JvdXA2Nj10aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICAgICAgdmFyIGdkeV90ZXh0MT1ncm91cDY2LmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMi0zMSx0aGlzLmdhbWUuaGVpZ2h0LzIrMTAwLCdnZHlfdGV4dDEnKTtcclxuICAgICAgICBnZHlfdGV4dDEuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIGdkeV90ZXh0MV9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGdkeV90ZXh0MSkudG8oe3k6MzExfSwxMDAwLCdMaW5lYXInLHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgZ2R5X3RleHQyPWdyb3VwNjYuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTE2NCx0aGlzLmdhbWUuaGVpZ2h0LzIrMTAwLCdnZHlfdGV4dDInKTtcclxuICAgICAgICBnZHlfdGV4dDIuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIGdkeV90ZXh0Ml9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKGdkeV90ZXh0MikudG8oe3k6Mzc0fSwxMzAwLCdMaW5lYXInLHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgZ2R5X3RleHQzPWdyb3VwNjYuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTMxLHRoaXMuZ2FtZS5oZWlnaHQvMisxMDAsJ2dkeV90ZXh0MycpO1xyXG4gICAgICAgIGdkeV90ZXh0My5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgZ2R5X3RleHQzX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oZ2R5X3RleHQzKS50byh7eTo0NDV9LDE1MDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciBnZHlfdGV4dDQ9Z3JvdXA2Ni5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItMTc5LHRoaXMuZ2FtZS5oZWlnaHQvMisxMDAsJ2dkeV90ZXh0NCcpO1xyXG4gICAgICAgIGdkeV90ZXh0NC5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgZ2R5X3RleHQ0X2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oZ2R5X3RleHQ0KS50byh7eTo1MDd9LDE4MDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciBnZHlfdGV4dDU9Z3JvdXA2Ni5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItMTY0LHRoaXMuZ2FtZS5oZWlnaHQvMisxMDAsJ2dkeV90ZXh0NScpO1xyXG4gICAgICAgIGdkeV90ZXh0NS5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgZ2R5X3RleHQ1X2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4oZ2R5X3RleHQ1KS50byh7eTo1NzF9LDIxMDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgZ2R5X3RleHQ1X2RoLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBnZHlfdGV4dDVfZGg9dGhpcy5nYW1lLmFkZC50d2VlbihnZHlfdGV4dDUpLnRvKHt5OjU3MX0sNDAwMCwnTGluZWFyJyx0cnVlKTtcclxuICAgICAgICAgICAgdmFyIHM2Nj10aGlzLmdhbWUuYWRkLnR3ZWVuKGdyb3VwNjYpLnRvKHthbHBoYTowfSwxMDAwLCdMaW5lYXInLHRydWUpLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ3BhZ2VfNycpIDtcclxuICAgICAgICAgICAgfSx0aGlzKTtcclxuXHJcbiAgICAgICAgfSx0aGlzKTtcclxuICAgIH0gLFxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja0xpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighIXRoaXMubW92aWVDbGlwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tb3ZpZUNsaXAuaXNQYXVzZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92aWVDbGlwLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59OyIsIi8vdmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xyXG52YXIgTW92aWVDbGlwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvTW92aWVDbGlwJyk7XHJcbnZhciBwYWdlXzcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLm1vdmllQ2xpcCA9IG51bGw7XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzID0gcGFnZV83O1xyXG5cclxucGFnZV83LnByb3RvdHlwZSA9IHtcclxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdwYWdlIHZpZGVvJyk7XHJcblxyXG4gICAgICAgIHZhciBncm91cDc3PXRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgICAgICB2YXIgemx5X2JnPWdyb3VwNzcuY3JlYXRlKDAsMCwnemx5X2JnJyk7XHJcbiAgICAgICAgemx5X2JnLnNjYWxlLnNldFRvKDEpO1xyXG5cclxuICAgICAgICB2YXIgbG9nbz1ncm91cDc3LmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMi0xNDYsdGhpcy5nYW1lLmhlaWdodC8yLTc1MCwnbG9nbycpO1xyXG4gICAgICAgIGxvZ28uc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIGxvZ29fZGg9dGhpcy5nYW1lLmFkZC50d2Vlbihsb2dvKS50byh7eTozNX0sMTMwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmFyIHZpZGVvMT1ncm91cDc3LmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgvMi0zNzUsdGhpcy5nYW1lLmhlaWdodC8yLTQ5NywndmlkZW8xJyk7XHJcbiAgICAgICAgdmlkZW8xLnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHZhciB2aWRlbzFfZGg9dGhpcy5nYW1lLmFkZC50d2Vlbih2aWRlbzEpLnRvKHt4OjE3NH0sMTMwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmFyIHZpZGVvMXRleHQ9Z3JvdXA3Ny5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItMzc1LHRoaXMuZ2FtZS5oZWlnaHQvMi0yMjAsJ3ZpZGVvMXRleHQnKTtcclxuICAgICAgICB2aWRlbzF0ZXh0LnNjYWxlLnNldFRvKDEpO1xyXG4gICAgICAgIHZhciB2aWRlbzF0ZXh0X2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4odmlkZW8xdGV4dCkudG8oe3g6MjQ4fSwxMzAwLCdMaW5lYXInLHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgdmlkZW8yPWdyb3VwNzcuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aCx0aGlzLmdhbWUuaGVpZ2h0LzItMTM5LCd2aWRlbzInKTtcclxuICAgICAgICB2aWRlbzIuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIHZpZGVvMl9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKHZpZGVvMikudG8oe3g6MTc0fSwxMzAwLCdMaW5lYXInLHRydWUpO1xyXG5cclxuICAgICAgICB2YXIgdmlkZW8ydGV4dD1ncm91cDc3LmNyZWF0ZSh0aGlzLmdhbWUud2lkdGgsdGhpcy5nYW1lLmhlaWdodC8yKzE0MSwndmlkZW8ydGV4dCcpO1xyXG4gICAgICAgIHZpZGVvMnRleHQuc2NhbGUuc2V0VG8oMSk7XHJcbiAgICAgICAgdmFyIHZpZGVvMnRleHRfZGg9dGhpcy5nYW1lLmFkZC50d2Vlbih2aWRlbzJ0ZXh0KS50byh7eDoyNDh9LDEzMDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciB2aWRlbzM9Z3JvdXA3Ny5jcmVhdGUodGhpcy5nYW1lLndpZHRoLzItMzc1LHRoaXMuZ2FtZS5oZWlnaHQvMisyMzQsJ3ZpZGVvMycpO1xyXG4gICAgICAgIHZpZGVvMy5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgdmlkZW8zX2RoPXRoaXMuZ2FtZS5hZGQudHdlZW4odmlkZW8zKS50byh7eDoxNzR9LDEzMDAsJ0xpbmVhcicsdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZhciB2aWRlbzN0ZXh0PWdyb3VwNzcuY3JlYXRlKHRoaXMuZ2FtZS53aWR0aC8yLTM3NSx0aGlzLmdhbWUuaGVpZ2h0LzIrNTA3LCd2aWRlbzN0ZXh0Jyk7XHJcbiAgICAgICAgdmlkZW8zdGV4dC5zY2FsZS5zZXRUbygxKTtcclxuICAgICAgICB2YXIgdmlkZW8zdGV4dF9kaD10aGlzLmdhbWUuYWRkLnR3ZWVuKHZpZGVvM3RleHQpLnRvKHt4OjI0OH0sMTMwMCwnTGluZWFyJyx0cnVlKTtcclxuXHJcbiAgICAgICAgdmlkZW8xLmlucHV0RW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdmlkZW8xLmV2ZW50cy5vbklucHV0RG93bi5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJodHRwOi8vdi5xcS5jb20vaWZyYW1lL3BsYXllci5odG1sP3ZpZD1wMDE3OTdqMWkwMiZ0aW55PTBcIixcInAwMTc5N2oxaTAyXCI7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgdmlkZW8yLmlucHV0RW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdmlkZW8yLmV2ZW50cy5vbklucHV0RG93bi5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJodHRwOi8vdi5xcS5jb20vaWZyYW1lL3BsYXllci5odG1sP3ZpZD1kMDE3OXduOTR0dSZ0aW55PTBcIixcImQwMTc5d245NHR1XCI7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgdmlkZW8zLmlucHV0RW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdmlkZW8zLmV2ZW50cy5vbklucHV0RG93bi5hZGQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCJodHRwOi8vdi5xcS5jb20vaWZyYW1lL3BsYXllci5odG1sP3ZpZD1pMDE3OXppZWJnbSZ0aW55PTBcIixcImkwMTc5emllYmdtXCI7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgfSAsXHJcblxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja0xpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighIXRoaXMubW92aWVDbGlwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tb3ZpZUNsaXAuaXNQYXVzZSgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmllQ2xpcC5yZXN1bWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW92aWVDbGlwLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59OyIsInZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbiAoZ2FtZSkge1xuICB0aGlzLmFzc2V0ID0gbnVsbDtcbiAgdGhpcy5yZWFkeSA9IGZhbHNlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcmVsb2FkZXJcblxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NldCA9IHRoaXMuYWRkLnNwcml0ZSh0aGlzLndpZHRoLzIsIHRoaXMuaGVpZ2h0LzIsICdwcmVsb2FkZXInKTtcbiAgICB0aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XG4gICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XG4gICAgaWYoISF3aW5kb3cuaW50cm9sQ29uZmlnKVxuICAgICAgICB3aW5kb3cuaW50cm9sQ29uZmlnLnByZWxvYWQoKTsvL+WKoOi9veW6j+WIl+W4p1xuXG4gICAgLy/lkK/liqhcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnaGFuZCcsJ2Fzc2V0cy9iZy9oYW5kLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdjaXJjbGVfMScsJ2Fzc2V0cy9iZy9jaXJjbGVfMS5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnY2lyY2xlXzInLCdhc3NldHMvYmcvY2lyY2xlXzIucG5nJyk7XG5cbiAgICAvL+W8gOWni1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd0eHQxJywnYXNzZXRzL2JnLzItMS5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgndHh0MicsJ2Fzc2V0cy9iZy8yLTIucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2RpYW4xJywnYXNzZXRzL2JnL2dhbWVfZGlhbjEucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2RpYW5tYXNrJywnYXNzZXRzL2JnL2RpYW5tYXNrLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdiZzEnLCdhc3NldHMvYmcvYmcxLmpwZycpO1xuXG4gICAgLy/lsbFcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnYmFja2dyb3VuZF8xJywnYXNzZXRzL2JnL2JnXzEuanBnJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2JhY2tncm91bmRfMV8xJywnYXNzZXRzL2JnL2JnXzFfMS5qcGcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnc2hhbl90ZXh0MScsJ2Fzc2V0cy9iZy8zLTEucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ3NoYW5fdGV4dDInLCdhc3NldHMvYmcvMy0yLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdzaGFuX3RleHQzJywnYXNzZXRzL2JnLzMtMy5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgna3VhbmcnLCdhc3NldHMvYmcvcmVjdC5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2hhbl94bHowJywnYXNzZXRzL2JnL21vdW50YWluXzAucG5nJywzNzUsMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2hhbl94bHoxJywnYXNzZXRzL2JnL21vdW50YWluXzEucG5nJywzNzUsMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2hhbl94bHoyJywnYXNzZXRzL2JnL21vdW50YWluXzIucG5nJywzNzUsMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2hhbl94bHozJywnYXNzZXRzL2JnL21vdW50YWluXzMucG5nJywzNzUsMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2hhbl94bHo0JywnYXNzZXRzL2JnL21vdW50YWluXzQucG5nJywzNzUsMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2hhbl94bHo1JywnYXNzZXRzL2JnL21vdW50YWluXzUucG5nJywzNzUsMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5hdWRpbygnc2hhbl9tcDMnLCAnYXNzZXRzL21vdW50YWluLm1wMycpO1xuXG4gICAgLy/mtbdcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnYmFja2dyb3VuZDInLCdhc3NldHMvYmcvYmdfMl8xLmpwZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdiZ18yJywnYXNzZXRzL2JnL2JnXzIuanBnJywxMTc2LDEyNzgpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdoYWlfdGV4dDEnLCdhc3NldHMvYmcvNC0xLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdoYWlfdGV4dDInLCdhc3NldHMvYmcvNC0yLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdoYWlfdGV4dDMnLCdhc3NldHMvYmcvNC0zLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdoYWlfeGx6MScsJ2Fzc2V0cy9iZy9zZWFfMC5wbmcnLDM3NSwxMDUpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdoYWlfeGx6MicsJ2Fzc2V0cy9iZy9zZWFfMS5wbmcnLDM3NSwxMDUpO1xuXG4gICAgdGhpcy5nYW1lLmxvYWQuYXVkaW8oJ2hhaV9tcDMnLCAnYXNzZXRzL3NlYS5tcDMnKTtcblxuICAgIC8v6Zeq55S1XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2JhY2tncm91bmQzJywnYXNzZXRzL2JnL2JnXzNfMS5qcGcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnYmdfMycsJ2Fzc2V0cy9iZy9iZ18zLmpwZycsMTE3NiwxMjc4KTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnc2hhbmRpYW5fdGV4dDEnLCdhc3NldHMvYmcvNS0xLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdzaGFuZGlhbl90ZXh0MicsJ2Fzc2V0cy9iZy81LTIucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3NkX3hsejAnLCdhc3NldHMvYmcvZmxhc2hfMC5wbmcnLDM3NSwzMzQpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdzZF94bHoxJywnYXNzZXRzL2JnL2ZsYXNoXzEucG5nJywzNzUsMzM0KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2RfeGx6MicsJ2Fzc2V0cy9iZy9mbGFzaF8yLnBuZycsMzc1LDMzNCk7XG4gICAgdGhpcy5nYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3NkX3hsejMnLCdhc3NldHMvYmcvZmxhc2hfMy5wbmcnLDM3NSwzMzQpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdzZF94bHo0JywnYXNzZXRzL2JnL2ZsYXNoXzQucG5nJywzNzUsMzM0KTtcbiAgICB0aGlzLmdhbWUubG9hZC5zcHJpdGVzaGVldCgnc2RfeGx6NScsJ2Fzc2V0cy9iZy9mbGFzaF81LnBuZycsMzc1LDMzNCk7XG4gICAgdGhpcy5nYW1lLmxvYWQuYXVkaW8oJ3NoYW5kaWFuX21wMycsICdhc3NldHMvZmxhc2gubXAzJyk7XG5cbiAgICAvL+W/g1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdiYWNrZ3JvdW5kNCcsJ2Fzc2V0cy9iZy9iZ180LmpwZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd4aW5fdGV4dDEnLCdhc3NldHMvYmcvNi0xLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd4aW5fdGV4dDInLCdhc3NldHMvYmcvNi0yLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd4aW5fdGV4dDMnLCdhc3NldHMvYmcvNi0zLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCd4aW5feGx6MScsJ2Fzc2V0cy9iZy9oZWFydF8wLnBuZycsMzc1LDEwMyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ3hpbl94bHoyJywnYXNzZXRzL2JnL2hlYXJ0XzEucG5nJywzNzUsMTAzKTtcbiAgICB0aGlzLmdhbWUubG9hZC5hdWRpbygneGluX21wMycsICdhc3NldHMvaGVhcnQubXAzJyk7XG5cbiAgICAvL+esrOS6jOmDqOWIhlxuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd0d29fYmcnLCdhc3NldHMvYmcvdHdvX2JnLmpwZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd0d29fc2hvdScsJ2Fzc2V0cy9iZy83LTEtYnRuLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd0d29fdGV4dCcsJ2Fzc2V0cy9iZy83LTEtdGV4dC5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgndHdvX3l1YW4nLCdhc3NldHMvYmcveXVhbi5wbmcnKTtcblxuICAgIC8v5omr5o+P6YOo5YiG5Zu+54mHXG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ3RpdGxlX2JnJywgJ2Fzc2V0cy9zY2FuL3RpdGxlX2JnLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdzY2FuX3RpdGxlJywgJ2Fzc2V0cy9zY2FuL3NjYW5fdGl0bGUucG5nJywzNzcsMTIwLDYpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdzY2FuX3R4dCcsICdhc3NldHMvc2Nhbi9zY2FuX3R4dC5wbmcnLDMwNyw5MCw2KTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnc2Nhbl9iZycsICdhc3NldHMvc2Nhbi9iYWNrZ3JvdW5kLmpwZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdzY2FuX2xpbmUnLCAnYXNzZXRzL3NjYW4vc2Nhbl9saW5lLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdub3RpY2UxJywgJ2Fzc2V0cy9zY2FuL25vdGljZTEucG5nJyk7XG4gICAgLy/miavmj4/lhoXnmoTpn7PkuZBcbiAgICB0aGlzLmdhbWUubG9hZC5hdWRpbygnYmtfbXAzJywgJ2Fzc2V0cy9iay5tcDMnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5hdWRpbygnc2pzX21wMycsICdhc3NldHMvc2pzLm1wMycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmF1ZGlvKCd0eXlfbXAzJywgJ2Fzc2V0cy90eXkubXAzJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuYXVkaW8oJ3dtX21wMycsICdhc3NldHMvd20ubXAzJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuYXVkaW8oJ3liX21wMycsICdhc3NldHMveWIubXAzJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuYXVkaW8oJ2J6X21wMycsICdhc3NldHMvYnoubXAzJyk7XG5cbiAgICAvL+i/h+a4oemhtVxuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdnZHlfdGV4dDEnLCAnYXNzZXRzL2JnL2dkeV90ZXh0MS5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnZ2R5X3RleHQyJywgJ2Fzc2V0cy9iZy9nZHlfdGV4dDIucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2dkeV90ZXh0MycsICdhc3NldHMvYmcvZ2R5X3RleHQzLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCdnZHlfdGV4dDQnLCAnYXNzZXRzL2JnL2dkeV90ZXh0NC5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnZ2R5X3RleHQ1JywgJ2Fzc2V0cy9iZy9nZHlfdGV4dDUucG5nJyk7XG5cbiAgICAvL+inhumikemhtVxuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd6bHlfYmcnLCAnYXNzZXRzL2JnL3pseV9iZy5qcGcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgndmlkZW8xJywgJ2Fzc2V0cy9iZy92aWRlbzEucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ3ZpZGVvMXRleHQnLCAnYXNzZXRzL2JnL3ZpZGVvMXRleHQucG5nJyk7XG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ3ZpZGVvMicsICdhc3NldHMvYmcvdmlkZW8yLnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd2aWRlbzJ0ZXh0JywgJ2Fzc2V0cy9iZy92aWRlbzJ0ZXh0LnBuZycpO1xuICAgIHRoaXMuZ2FtZS5sb2FkLmltYWdlKCd2aWRlbzMnLCAnYXNzZXRzL2JnL3ZpZGVvMy5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgndmlkZW8zdGV4dCcsICdhc3NldHMvYmcvdmlkZW8zdGV4dC5wbmcnKTtcbiAgICB0aGlzLmdhbWUubG9hZC5pbWFnZSgnbG9nbycsICdhc3NldHMvYmcvbG9nby5wbmcnKTtcblxuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgIC8vdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xuICAgIC8v6K6+572u5Y676YKj5LiA6aG1XG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCd0ZXN0Jyk7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCEhdGhpcy5yZWFkeSkge1xuXG4gICAgfVxuICB9LFxuXG4gIC8v5Yqg6L296L+b5bqmXG4gIG9uRmlsZUNvbXBsZXRlOmZ1bmN0aW9uKHByb2dyZXNzLCBjYWNoZUtleSwgc3VjY2VzcywgdG90YWxMb2FkZWQsIHRvdGFsRmlsZXMpe1xuICAgIGNvbnNvbGUubG9nKFwiRmlsZSBDb21wbGV0ZTogXCIgKyBwcm9ncmVzcyArIFwiJSAtIFwiICsgdG90YWxMb2FkZWQgKyBcIiBvdXQgb2YgXCIgKyB0b3RhbEZpbGVzKTtcbiAgfSxcbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcbiAgfVxufTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBzYW5jaGV6IG9uIDE2LzEvNC5cbiAqL1xudmFyIEluZm9NYXNrID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvSW5mb01hc2snKTtcbnZhciBDaXJjbGVTdmcgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9DaXJjbGVTdmcnKTtcbnZhciBUZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW5mb21hc2s9bnVsbDtcbiAgICB0aGlzLmNTdmc9bnVsbDtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IFRlc3Q7XG5UZXN0LnByb3RvdHlwZSA9IHtcbiAgICB1cGRhdGU6ZnVuY3Rpb24oKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNjYW5fbGluZS5hbmdsZSk7XG5cbiAgICAgICAgaWYodGhpcy5zY2FuX2xpbmUuYW5nbGU+MzApe1xuICAgICAgICAgICAgdGhpcy5pbmZvbWFzay5tYXNrPW51bGw7XG4gICAgICAgICAgICB0aGlzLnRyaW1hc2suYWxwaGE9MDtcblxuICAgICAgICB9XG5cblxuICAgICAgICBpZigodGhpcy5zY2FuX2xpbmUuYW5nbGU+LTIwJiYodGhpcy5tdXNpY19mbGFnPT0tMXx8IXRoaXMuYXJyW3RoaXMubXVzaWNfZmxhZ10ucGxheWluZygpKSYmIXRoaXMuc2xpbmUuaXNQYXVzZWQpKXtcbiAgICAgICAgICAgIHRoaXMubXVzaWNfZmxhZysrO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzbGluZSBydW4gIG11c2ljIHBsYXkgXCIpO1xuICAgICAgICAgICAgZm9yKHZhciBpIGluIHRoaXMuYXJyKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFycltpXS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFyclt0aGlzLm11c2ljX2ZsYWddLnBsYXkodGhpcy5tdXNpY19mbGFnKycnKTtcbiAgICAgICAgfVxuXG5cbiAgICB9LFxuICAgIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXJ0UGxheT1mYWxzZTtcblxuICAgICAgICB0aGlzLmZpcnN0SW5wdXQ9dHJ1ZTtcbiAgICAgICAgdGhpcy5jU3ZnPW5ldyBDaXJjbGVTdmcoKTtcbiAgICAgICAgdGhpcy5jU3ZnLmluaXRDaXJjbGUoKTtcbiAgICAgICAgdGhpcy5nYW1lLndvcmxkLnNldEJvdW5kcygwLCAwLCA3NTAsMTIwNik7XG4gICAgICAgIC8vUGF1c2UgIE5vdGljZVxuICAgICAgICB0aGlzLnBhdXNlX25vdGljZT10aGlzLmdhbWUuYWRkLnNwcml0ZSgzNzUsNjAzLCdub3RpY2UxJyk7XG4gICAgICAgIHRoaXMucGF1c2Vfbm90aWNlLmFuY2hvci5zZXRUbygwLjUpO1xuICAgICAgICB0aGlzLnBhdXNlX25vdGljZS5hbHBoYT0wO1xuLy/nrKzkuozpg6jliIbngrnlh7vmjInpkq5cbiAgICAgICAgdGhpcy50d29fc2hvdT10aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmdhbWUud2lkdGgvMix0aGlzLmdhbWUuaGVpZ2h0LzIrODAsJ3R3b19zaG91Jyk7XG4gICAgICAgIHRoaXMudHdvX3Nob3Uuc2NhbGUuc2V0VG8oMSk7XG4gICAgICAgIHRoaXMudHdvX3l1YW49dGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoLzItMzUsdGhpcy5nYW1lLmhlaWdodC8yKzQ1LCd0d29feXVhbicpO1xuICAgICAgICB0aGlzLnR3b195dWFuLnNjYWxlLnNldFRvKDEpO1xuICAgICAgICB0aGlzLnR3b190ZXh0PXRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53aWR0aC8yLTQwLHRoaXMuZ2FtZS5oZWlnaHQvMisyMDAsJ3R3b190ZXh0Jyk7XG4gICAgICAgIHRoaXMudHdvX3RleHQuc2NhbGUuc2V0VG8oMSk7XG4vL+mfs+S5kFxuICAgICAgICB0aGlzLm11c2ljX2ZsYWc9LTE7XG4gICAgICAgIHRoaXMuYXJyID0gbmV3IEFycmF5KDYpO1xuICAgICAgICB2YXIgX3RoaXM9dGhpcztcblxuICAgICAgICAvL3RoaXMubXBsYXlpbmc9ZmFsc2U7XG4gICAgICAgIHRoaXMuYXJyWzBdPW5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogWydhc3NldHMvd20ubXAzJ10sXG4gICAgICAgICAgICBzcHJpdGU6IHtcbiAgICAgICAgICAgICAgICAwOiBbMCwgNjI2MF0sXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXJyWzFdPW5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogWydhc3NldHMvYnoubXAzJ10sXG4gICAgICAgICAgICBzcHJpdGU6IHtcbiAgICAgICAgICAgICAgICAxOiBbMCwgNjM3MF0sXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXJyWzJdPW5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogWydhc3NldHMvYmsubXAzJ10sXG4gICAgICAgICAgICBzcHJpdGU6IHtcbiAgICAgICAgICAgICAgICAyOiBbMCwgNjQ1MF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXJyWzNdPW5ldyBIb3dsKHtcbiAgICAgICAgICAgIHNyYzogWydhc3NldHMvc2pzLm1wMyddLFxuICAgICAgICAgICAgc3ByaXRlOiB7XG4gICAgICAgICAgICAgICAgMzogWzAsIDYyNjBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFycls0XT1uZXcgSG93bCh7XG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL3liLm1wMyddLFxuICAgICAgICAgICAgc3ByaXRlOiB7XG4gICAgICAgICAgICAgICAgNDogWzAsIDYzMjBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFycls1XT1uZXcgSG93bCh7XG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL3R5eS5tcDMnXSxcbiAgICAgICAgICAgIHNwcml0ZToge1xuICAgICAgICAgICAgICAgIDU6IFswLCA2ODQwXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbmZvbWFzay5lbmRPdXQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zY2FuX2xpbmUuYWxwaGE9MDtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdmdkaXY9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHJhd2luZ1wiKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdmdkaXYuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBfdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdwYWdlXzYnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jU3ZnLnBhdXNlQ2lyY2xlKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5wdXQub25Eb3duLnJlbW92ZShfdGhpcy5zY2FuUGxheSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5wdXQub25VcC5yZW1vdmUoX3RoaXMuc2NhblBhdXNlLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy90aGlzLmFyclswXSA9dGhpcy5nYW1lLmFkZC5hdWRpbygnd21fbXAzJyk7XG4gICAgICAgIC8vdGhpcy5hcnJbMV0gPXRoaXMuZ2FtZS5hZGQuYXVkaW8oJ2J6X21wMycpO1xuICAgICAgICAvL3RoaXMuYXJyWzJdID10aGlzLmdhbWUuYWRkLmF1ZGlvKCdia19tcDMnKTtcbiAgICAgICAgLy90aGlzLmFyclszXSA9dGhpcy5nYW1lLmFkZC5hdWRpbygnc2pzX21wMycpO1xuICAgICAgICAvL3RoaXMuYXJyWzRdID10aGlzLmdhbWUuYWRkLmF1ZGlvKCd5Yl9tcDMnKTtcbiAgICAgICAgLy90aGlzLmFycls1XSA9dGhpcy5nYW1lLmFkZC5hdWRpbygndHl5X21wMycpO1xuXG4gICAgICAgIC8vZm9yKHZhciBpID0wO2k8NTtpKyspe1xuICAgICAgICAvLyAgICB0aGlzLmFycltpXS5vblN0b3AuYWRkKGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICAgICAgICB0aGlzLm11c2ljX2ZsYWcrKztcbiAgICAgICAgLy8gICAgfSx0aGlzKVxuICAgICAgICAvL31cbiAgICAgICAgLy90aGlzLmFycls1XS5vblN0b3AuYWRkKGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vICAgIHRoaXMuaW5mb21hc2suZW5kT3V0KCk7XG4gICAgICAgIC8vICAgIHRoaXMuc2Nhbl9saW5lLmFscGhhPTA7XG4gICAgICAgIC8vICAgIHRoaXMuc3ZnZGl2PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyYXdpbmdcIik7XG4gICAgICAgIC8vICAgIHRoaXMuc3ZnZGl2LnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICAgIC8vICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgncGFnZV82Jyk7XG4gICAgICAgIC8vICAgIHRoaXMuY1N2Zy5wYXVzZUNpcmNsZSgpO1xuICAgICAgICAvLyAgICB0aGlzLmlucHV0Lm9uRG93bi5yZW1vdmUodGhpcy5zY2FuUGxheSwgdGhpcyk7XG4gICAgICAgIC8vICAgIHRoaXMuaW5wdXQub25VcC5yZW1vdmUodGhpcy5zY2FuUGF1c2UsIHRoaXMpO1xuICAgICAgICAvL30sdGhpcyk7XG5cblxuICAgICAgICB0aGlzLmluZm9tYXNrPW5ldyBJbmZvTWFzayh0aGlzLmdhbWUsMzc1LDI3MywwKTtcbiAgICAgICAgdGhpcy5zY2FuX2xpbmU9dGhpcy5nYW1lLmFkZC5zcHJpdGUoMzc1LDgwMiwnc2Nhbl9saW5lJyk7XG4gICAgICAgIHRoaXMuc2Nhbl9saW5lLmFscGhhPTA7XG4gICAgICAgIHRoaXMuc2Nhbl9saW5lLmFuY2hvci5zZXRUbygxKTtcbiAgICAgICAgdGhpcy5zY2FuX2xpbmUuYW5nbGU9MTgwO1xuICAgICAgICAvL+adhuWIneWni+S9jee9ruKGkVxuICAgICAgICAvLzQwMDDnrYnkuo7ovazkuIDlnIjnmoTml7bpl7TihpNcbiAgICAgICAgdGhpcy5zbGluZT10aGlzLmdhbWUuYWRkLnR3ZWVuKCB0aGlzLnNjYW5fbGluZSkudG8oe3JvdGF0aW9uOiBNYXRoLlBJfSwgNjgwMCwgbnVsbCwgZmFsc2UsIDAsIDYsIGZhbHNlKTtcbiAgICAgICAgdmFyIGY9ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfdGhpcy50cmltYXNrLmFscGhhPTE7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5mb21hc2subWFzayA9ICBfdGhpcy50cmltYXNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/liIfmjaLlm77niYdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zbGluZS5vbkxvb3AuYWRkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0aGlzLmluZm9tYXNrLmZhZGVPdXQoZik7XG4gICAgICAgIH0sdGhpcyk7XG4gICAgICAgIHRoaXMuc2xpbmUub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKXtcblxuXG4gICAgICAgIH0sdGhpcyk7XG5cbiAgICAgICAgLy8xMjBkZWdcbiAgICAgICAgdGhpcy50cmltYXNrPXRoaXMuZ2FtZS5hZGQuZ3JhcGhpY3MoMzc1LCA4MDIpO1xuICAgICAgICB0aGlzLnRyaW1hc2suYmVnaW5GaWxsKDB4ZmZmZmZmKTtcbiAgICAgICAgdGhpcy50cmltYXNrLmRyYXdQb2x5Z29uKFswLDAsMTAyMCwtNjAwLDAsMTIwMF0pO1xuICAgICAgICB0aGlzLmluZm9tYXNrLm1hc2sgPSAgdGhpcy50cmltYXNrO1xuICAgICAgICAvL+S4ieinkuW9ouKGk1xuICAgICAgICB0aGlzLnRtYXNrPXRoaXMuZ2FtZS5hZGQudHdlZW4odGhpcy50cmltYXNrKS50byh7YW5nbGU6IDM2MH0sIDY4MDAsIG51bGwsIGZhbHNlLCAwLCA1LCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMuc2NhblBsYXksIHRoaXMpO1xuICAgICAgICB0aGlzLmlucHV0Lm9uVXAuYWRkKHRoaXMuc2NhblBhdXNlLCB0aGlzKTtcblxuICAgIH0sXG4gICAgLy/ngrnlh7vlkI5cbiAgICBzY2FuUGxheTpmdW5jdGlvbigpe1xuICAgICAgICBpZih0aGlzLmZpcnN0SW5wdXQpe1xuXG4gICAgICAgICAgICB0aGlzLnR3b19zaG91LmFscGhhPTA7XG4gICAgICAgICAgICB0aGlzLnR3b195dWFuLmFscGhhPTA7XG4gICAgICAgICAgICB0aGlzLnR3b190ZXh0LmFscGhhPTA7XG4gICAgICAgICAgICB0aGlzLnNjYW5fbGluZS5hbHBoYT0xO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydFwiKTtcbiAgICAgICAgICAgIHRoaXMuc2xpbmUuc3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMudG1hc2suc3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RJbnB1dD1mYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY1N2Zy5wbGF5Q2lyY2xlKCk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIC8v5p2+5byA5ZCO5YaN5qyh54K55Ye757un57utXG4gICAgICAgICAgICB0aGlzLnNjYW5fbGluZS5hbHBoYT0xO1xuICAgICAgICAgICAgdGhpcy50d29fc2hvdS5hbHBoYT0wO1xuICAgICAgICAgICAgdGhpcy50d29feXVhbi5hbHBoYT0wO1xuICAgICAgICAgICAgdGhpcy50d29fdGV4dC5hbHBoYT0wO1xuICAgICAgICAgICAgdGhpcy5wYXVzZV9ub3RpY2UuYWxwaGE9MDtcbiAgICAgICAgICAgIHRoaXMuaW5mb21hc2suYWxwaGE9MTtcbiAgICAgICAgICAgIHRoaXMuc3ZnZGl2PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyYXdpbmdcIik7XG4gICAgICAgICAgICB0aGlzLnN2Z2Rpdi5zdHlsZS5vcGFjaXR5PVwiMVwiO1xuXG4gICAgICAgICAgICB0aGlzLnNsaW5lLnJlc3VtZSgpO1xuICAgICAgICAgICAgdGhpcy50bWFzay5yZXN1bWUoKTtcbiAgICAgICAgICAgIHRoaXMuY1N2Zy5yZXN1bWVDaXJjbGUoKTtcbiAgICAgICAgICAgIGlmKHRoaXMubXVzaWNfZmxhZz49MCl7XG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuYXJyW3RoaXMubXVzaWNfZmxhZ10ucGxheWluZygpKXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm11c2ljIHJlc3VtZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJbdGhpcy5tdXNpY19mbGFnXS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy/mnb7lvIDlkI5cbiAgICBzY2FuUGF1c2U6ZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5jU3ZnLnBhdXNlQ2lyY2xlKCk7XG4gICAgICAgIHRoaXMuc3ZnZGl2PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyYXdpbmdcIik7XG4gICAgICAgIHRoaXMuc3ZnZGl2LnN0eWxlLm9wYWNpdHk9XCIwXCI7XG4gICAgICAgIHRoaXMuc2Nhbl9saW5lLmFscGhhPTA7XG4gICAgICAgIHRoaXMucGF1c2Vfbm90aWNlLmFscGhhPTE7XG4gICAgICAgIHRoaXMuaW5mb21hc2suYWxwaGE9MDtcbiAgICAgICAgdGhpcy5zbGluZS5wYXVzZSgpO1xuICAgICAgICB0aGlzLnRtYXNrLnBhdXNlKCk7XG4gICAgICAgIGlmKHRoaXMubXVzaWNfZmxhZz49MCl7XG4gICAgICAgICAgICBpZiggdGhpcy5hcnJbdGhpcy5tdXNpY19mbGFnXS5wbGF5aW5nKCkpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibXVzaWMgcGF1c2VcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnJbdGhpcy5tdXNpY19mbGFnXS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuXG5cbiAgICB9XG5cblxufTtcbiJdfQ==
